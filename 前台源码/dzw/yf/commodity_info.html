<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品资料</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/commodity_info.css">
    <link rel="stylesheet" href="css/public-y.css">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="package/lib/style.css">
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body class="hea-div">
    <div class="container-fluid" style="height: 100%;">
        <div class="row" style="height: 100%;padding: 0px 0px !important;">
            <div style=" border: 0px solid red; padding: 0px 0px !important;" class="col-sm-12">
                <div class="col-sm-12 clearfix nav-div" style="border: 0px solid rebeccapurple;">
                    <h3 class="clearfix" style="margin-top: 10px;">商品资料
                        <button class="btn btn-default pull-right btnexit" type="button">关闭</button>
                        <div class="pull-right" style="margin-right: 10px !important;">
                            <form class="form-inline">
                                <div class="form-group">
                                    <input type="text" class="form-control" style="width: 300px;"
                                        placeholder="匹配编码/名称/名称简写">
                                </div>
                                <button type="button" class="btn btn-warning selbtn">搜索</button>
                            </form>
                        </div>
                    </h3>
                </div>
            </div>
            <div class="col-sm-12 flexdiv" style="border: 0px solid red;padding-left: 0px;">
                <div>
                    <vxe-toolbar>
                        <template v-slot:buttons>
                            <div class="dropdown" style="display: inline-block;">
                                <vxe-button data-toggle="dropdown" id="dropdownMenu1" class="dropdown-toggle"
                                    aria-expanded="true">分类编辑
                                    <span class="caret"></span>
                                </vxe-button>
                                <ul class="dropdown-menu nav-li" role="menu" aria-labelledby="dropdownMenu1">
                                    <li role="presentation">
                                        <a role="menuitem" tabindex="-1" @click="openInsGoodsCategory">增加同级分类</a>
                                    </li>
                                    <li role="presentation">
                                        <a role="menuitem" tabindex="-1" @click="openInsGoodsCategorychil">增加子级分类</a>
                                    </li>
                                    <li role="presentation">

                                        <a role="menuitem" tabindex="-1" @click="openUpdCategory">修改分类</a>
                                    </li>
                                    <li role="presentation" class="divider"
                                        style="padding:0px !important; margin: 2px 0px !important;">
                                    <li>
                                        <a role="menuitem" tabindex="-1" data-toggle="modal"
                                            data-target="#myModal3">分类编辑</a>
                                    </li>
                                    </li>
                                </ul>
                            </div>
                            <vxe-button icon="glyphicon glyphicon-remove-circle" @click="openRemodeCategory">删除分类
                            </vxe-button>
                        </template>
                    </vxe-toolbar>
                </div>
                <div>
                    <vxe-toolbar>
                        <template v-slot:buttons>
                            <vxe-button icon="glyphicon glyphicon-arrow-up" @click=" btnFindChange(pages.prev)">上页
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-arrow-down" @click="btnFindChange(pages.next)">下页
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-search" @click="openSelGoods">查询
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-plus" @click="openInsGoods">增加
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-edit" @click="openUpdGoods">
                                修改
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-remove-circle" @click="removeGoods">删除</vxe-button>
                            <vxe-button icon="glyphicon glyphicon-export" @click="exportExcelModal">导出</vxe-button>
                            <vxe-button icon="glyphicon glyphicon-picture" @click="openGoodsIconModal">
                                照片</vxe-button>
                            <vxe-button icon="fa fa-barcode">条码</vxe-button>
                            <!-- <vxe-button icon=" glyphicon-th-large 
                        glyphicon glyphicon-th">分类设置</vxe-button> -->
                            <vxe-button icon="fa fa-cog" @click="columnModal">字段设置</vxe-button>
                            <!-- <vxe-button @click="$refs.xTable.setCurrentRow(tableData[1])">设置第二行选中</vxe-button> -->
                            <!-- <vxe-button @click="$refs.xTable.clearCurrentRow()">取消选中</vxe-button> -->
                        </template>
                    </vxe-toolbar>
                </div>
            </div>
            <div class="col-sm-12 treefont"
                style="height: 76%; border: 0px solid red; padding-left: 0px;padding-right: 0px;">
                <div v-show="treeVisble" class="col-sm-2"
                    style=" height: 100%;border: 0px solid red; font-size: 16px; padding-right: 0px;">
                    <!-- 左侧树形 -->
                    <template>
                        <vxe-grid :loading="loading" round resizable show-overflow class="mytable-scrollbar"
                            height="100%" row-id="column1" highlight-hover-row ref="xTree" highlight-current-row
                            :show-header="false" @current-change="currentChangeEventTree"
                            :tree-config="{children: 'children',reserve:'true'}" :data="treeData" :columns="treeColumn">
                            <!-- 使用自定义插槽来定义显示内容 -->
                            <template v-slot:user-slot="{ row }">
                                <span>{{ row.goodsCId+'-'+row.goodsName }}</span>
                            </template>
                        </vxe-grid>
                    </template>
                </div>
                <div :class="[treeVisble?'col-sm-10 btn-flex':'col-sm-12 btn-flex']"
                    style="height: 100%;border: 0px solid red; padding: 0px !important; ">
                    <div class="anniu"><button class="btn btn-left" @click="switchTo">
                            <i v-if="treeVisble" class="fa fa-caret-left"></i>
                            <i v-else class="fa fa-caret-right"></i>
                        </button>
                    </div>
                    <div style="height: 100%;width: 99%; padding: 0px;">
                        <div style="height: 100%;">
                            <template>
                                <vxe-grid border :loading="loading" stripe highlight-hover-row highlight-current-row
                                    resizable ref="xTable" class="mytable-scrollbar" auto-resize height="100%"
                                    :data="tableData" :columns="tableColumn" @current-change="currentChangeEvent" round
                                    show-header-overflow show-overflow>
                                </vxe-grid>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 countn" style=" height: 4.5%; border: 0px solid red;">
                &nbsp;&nbsp;&nbsp;&nbsp;共&nbsp;<span>{{ pages.total }}&nbsp;条数据

                </span>&nbsp;&nbsp;第&nbsp;<span>{{ pages.current }}</span>&nbsp;页
                </span>&nbsp;&nbsp;共&nbsp;<span>{{ pages.pages }}</span>&nbsp;页
            </div>
            <!-- 模态框  -->
            <!-- 增加分类 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel1">商品分类</h4>
                        </div>
                        <div class="modal-body" style="padding: 15px 30px;">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="category.goodsCId">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别名称</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="category.goodsName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;上级编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" disabled
                                            v-model="category.showParentid">
                                        <input type="hidden" class="form-control" v-model="category.parentid">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info abtn"
                                style="padding-left: 25px; padding-right: 25px;" data-dismiss="modal">取消</button>
                            <button type="button" class="btn  btn-success abtn"
                                style="padding-left: 25px; padding-right: 25px;" @click="insCategory">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 修改分类 -->
            <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel2">商品分类</h4>
                        </div>
                        <div class="modal-body" style="padding: 15px 30px;">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="category.goodsCId">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别名称</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="category.goodsName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;上级编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" disabled
                                            v-model="category.showParentid">
                                        <input type="hidden" class="form-control" v-model="category.parentid">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info abtn"
                                style="padding-left: 25px; padding-right: 25px;" data-dismiss="modal">取消</button>
                            <button type="button" class="btn  btn-success abtn" @click="updCategory"
                                style="padding-left: 25px; padding-right: 25px;">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 查询时 选择分类-->
            <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document" style="width: 600px !important;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel3">商品分类
                                <button type="button" class="btn btn-success pull-right" @click="btnxuanz"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 选择</button>
                            </h4>
                        </div>
                        <div class="modal-body row" style="padding: 0px 30px;">
                            <div class="alert alert-danger" v-if="tempIstrue2" id="alert2"
                                style="margin-bottom: 10px !important;">
                                <a href="#" class="close" data-dismiss="alert">
                                    &times;
                                </a>
                                <strong>错误信息：</strong><span>请选择树目录</span>
                            </div>
                            <div class="coml-sm-12 tempTable">
                                <div style="height: 400px;padding-right: 0px; ">
                                    <vxe-grid round border resizable show-overflow class="mytable-scrollbar"
                                        height="100%" row-id="column1" auto-resize highlight-hover-row ref="xTree2"
                                        highlight-current-row @current-change="currentChangeEventTree2"
                                        @cell-dblclick="xTree3dblclick2"
                                        :tree-config="{children: 'children',expandAll:'true',indent:'40'}"
                                        :data="treeData" :columns="treeColumn2">
                                    </vxe-grid>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">

                        </div>
                    </div>
                </div>
            </div>
            <!-- 删除分类编辑 -->
            <div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel4">商品分类</h4>
                        </div>
                        <div class="modal-body">
                            <h5>删除项目分类时，连同下面的维修项目一起删除？</h5>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                            <button type="button" class="btn btn-primary" @click="removeCategory">是</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 修改提示 -->
            <!-- Modal -->
            <div class="modal fade bs-example-modal-sm" id="myModalalert" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">

                        <div class="modal-body">
                            <h5><i class="fa fa-times" style="color: red;"></i> 存在子目录，不能修改！！！</h5>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 删除提示 -->
            <div class="modal fade bs-example-modal-sm" id="myModalalertdel" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">

                        <div class="modal-body">
                            <h5><i class="fa fa-times" style="color: red;"></i> 存在子目录，不能删除！！！</h5>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ====== 商品资料增加 ====== -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel6" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document" style="width: 1000px;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel6">商品资料编辑
                                <div class="pull-right">
                                    <div class="checkbox checcss">
                                        <label>
                                            <input type="checkbox" v-model="blockUp" @change="checkbox"> 停用
                                        </label>
                                    </div>
                                    <button type="button" class="btn btn-success" @click="saveGoods"
                                        style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                            class="glyphicon glyphicon-ok"></span> 保存</button>
                                </div>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                                <form class="form-horizontal fordiv1">
                                    <div class="col-sm-12">
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;项目编码</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="goods.goodsId">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;商品名称</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control" style="width: 105.5%;"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="goods.goodsName">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-3">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;商品品牌</label>
                                                <div class="col-sm-7">
                                                    <select class="form-control" v-model="goods.gbId">
                                                        <option v-for="item in GoodsBrand" :value="item.gbId">
                                                            {{ item.gbName }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">适用车型</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="goods.engineType">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">数量单位</label>
                                                <div class="col-sm-7">
                                                    <select class="form-control" v-model="goods.unit">
                                                        <option value="个">个</option>
                                                        <option value="件">件</option>
                                                        <option value="套">套</option>
                                                        <option value="把">把</option>
                                                        <option value="捆">捆</option>
                                                        <option value="双">双</option>
                                                        <option value="台">台</option>
                                                        <option value="张">张</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;商品大类</label>
                                                <div class="col-sm-4">
                                                    <input type="text" class="form-control" v-model="goods.goodsCId2"
                                                        style="border-radius:4px 0px 0px 4px;" placeholder="请选择商品类别"
                                                        disabled>
                                                    <input type="hidden" v-model="goods.goodsCId">
                                                </div>
                                                <div class="col-lg-5">
                                                    <div class="input-group" style="width: 111%;">
                                                        <input type="text" class="form-control" disabled
                                                            v-model="goods.goodsName2"
                                                            style="border-radius:0px 0px 0px 0px;">
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" data-toggle="modal"
                                                                data-target="#myModal11" type="button"><span
                                                                    class="glyphicon glyphicon-plus"></span></button>
                                                        </span>
                                                    </div><!-- /input-group -->
                                                </div><!-- /.col-lg-6 -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">收入分类</label>
                                            <div class="col-sm-7">
                                                <select class="form-control" v-model="goods.iid">
                                                    <option value="工时费">工时费</option>
                                                    <option value="燃油费">燃油费</option>
                                                    <option value="代办费">代办费</option>
                                                    <option value="其他费">其他费</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">原厂副厂</label>
                                            <div class="col-sm-7">
                                                <select class="form-control" v-model="goods.spec5">
                                                    <option value="原厂件">原厂件</option>
                                                    <option value="副厂件">副厂件</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品等级</label>
                                            <div class="col-sm-7">
                                                <select class="form-control" v-model="goods.spec6">
                                                    <option value="优">优</option>
                                                    <option value="良">良</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品产地</label>
                                            <div class="col-sm-7">
                                                <select class="form-control" v-model="goods.proId">
                                                    <option v-for="item in provinces" :value="item.proId">{{
                                                        item.province }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-6" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                    class="span1">*</span>&nbsp;厂商名称</label>
                                            <div class="col-sm-4">
                                                <input type="text" class="form-control" v-model="goods.regionId"
                                                    style="border-radius:4px 0px 0px 4px;" placeholder="请选择供货厂商"
                                                    disabled>
                                            </div>
                                            <div class="col-lg-5">
                                                <div class="input-group" style="width: 111%;">
                                                    <input type="hidden" v-model=" goods.sid">
                                                    <input type="text" class="form-control" disabled
                                                        v-model="goods.regionName"
                                                        style="border-radius:0px 0px 0px 0px;">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" @click="sonPageClick"
                                                            type="button"><span
                                                                class="glyphicon glyphicon-plus"></span></button>
                                                    </span>
                                                </div><!-- /input-group -->
                                            </div><!-- /.col-lg-6 -->
                                        </div>
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">原厂编码</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.oldBM">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3">
                                            <label for="inputEmail1" class="col-sm-4 control-label">条形码</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.itemTM">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">包装规格</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.packSpec">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">体积A</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.spec">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">毛重</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.grossWeight">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3">
                                            <label for="inputEmail1" class="col-sm-4 control-label">净重</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.netWeight">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-12">
                                            <label for="inputEmail1" class="col-sm-4 control-label">互换码</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" style="width: 107.45%;"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.interchangeNo">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px;">
                                            <label for="inputEmail1"
                                                class="col-sm-4 control-label">&nbsp;进货价&nbsp;</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" @input="inputChange"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.column1" placeholder="0.00">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1"
                                                class="col-sm-4 control-label">&nbsp;售价按&nbsp;</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" v-model="goods.zd3" @change="checkChange">
                                                    <option value="售价表">售价表</option>
                                                    <option value="加价表">加价表</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1"
                                                class="col-sm-4 control-label">&nbsp;加价率&nbsp;</label>
                                            <div class="col-sm-8">
                                                <template v-if="goods.zdInputVisible">
                                                    <input type="text" class="form-control" @input="inputChange"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        placeholder="0.00" v-model="goods.mzscale" style="width: 103%;">
                                                </template>
                                                <template v-else>
                                                    <input type="text" class="form-control" disabled placeholder="0.00"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="goods.mzscale" style="width: 103%;">
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;标准价</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" placeholder="0.00"
                                                    onkeyup="value=value.replace(/[^\d{1,}\.\d{1,}|\d{1,}]/g,'')"
                                                    v-model="goods.price">
                                                <!-- onkeyup="this.value=this.value.replace(/[, ]/g,'')" -->
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;会员价</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" placeholder="0.00"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.memberPrice">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;VIP价</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" style="width: 103%;"
                                                    placeholder="0.00"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.vipPrice">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px;">
                                            <label for="inputEmail1"
                                                class="col-sm-4 control-label">&nbsp;协议价&nbsp;</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" placeholder="0.00"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.protocolPrice">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1"
                                                class="col-sm-4 control-label">&nbsp;索赔价&nbsp;</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" placeholder="0.00"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.claimPrice">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1"
                                                class="col-sm-4 control-label">&nbsp;保险价&nbsp;</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" style="width: 103%;"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    placeholder="0.00" v-model="goods.insurancePrice">
                                            </div>
                                        </div>
                                    </div>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ====== 商品修改 ====== -->
        <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel7" role="dialog"
            aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document" style="width: 1000px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title clearfix" id="myModalLabel6">商品资料编辑
                            <div class="pull-right">
                                <div class="checkbox checcss">
                                    <label>
                                        <input type="checkbox" v-model="blockUp" @change="checkbox"> 停用
                                    </label>
                                </div>
                                <button type="button" class="btn btn-success" @click="saveUpdGoods"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 保存</button>
                            </div>
                        </h4>
                    </div>
                    <div class="modal-body row">
                        <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                            <form class="form-horizontal fordiv1">
                                <div class="col-sm-12">
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                    class="span1">*</span>&nbsp;项目编码</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.goodsId">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                    class="span1">*</span>&nbsp;商品名称</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" style="width: 105.5%;"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.goodsName">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3">
                                            <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                    class="span1">*</span>&nbsp;商品品牌</label>
                                            <div class="col-sm-7">
                                                <select class="form-control" v-model="goods.gbId">
                                                    <option v-for="item in GoodsBrand" :value="item.gbId">
                                                        {{ item.gbName }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">适用车型</label>
                                            <div class="col-sm-7">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.engineType">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-3" style="margin-right: 15px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">数量单位</label>
                                            <div class="col-sm-7">
                                                <select class="form-control" v-model="goods.unit">
                                                    <option value="个">个</option>
                                                    <option value="件">件</option>
                                                    <option value="套">套</option>
                                                    <option value="把">把</option>
                                                    <option value="捆">捆</option>
                                                    <option value="双">双</option>
                                                    <option value="台">台</option>
                                                    <option value="张">张</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                    class="span1">*</span>&nbsp;商品大类</label>
                                            <div class="col-sm-4">
                                                <input type="text" class="form-control" v-model="goods.goodsCId2"
                                                    style="border-radius:4px 0px 0px 4px;" placeholder="请选择商品类别"
                                                    disabled>
                                                <input type="hidden" v-model="goods.goodsCId">
                                            </div>
                                            <div class="col-lg-5">
                                                <div class="input-group" style="width: 111%;">
                                                    <input type="text" class="form-control" disabled
                                                        v-model="goods.goodsName2"
                                                        style="border-radius:0px 0px 0px 0px;">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" data-toggle="modal"
                                                            data-target="#myModal11" type="button"><span
                                                                class="glyphicon glyphicon-plus"></span></button>
                                                    </span>
                                                </div><!-- /input-group -->
                                            </div><!-- /.col-lg-6 -->
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">收入分类</label>
                                        <div class="col-sm-7">
                                            <select class="form-control" v-model="goods.iid">
                                                <option value="工时费">工时费</option>
                                                <option value="燃油费">燃油费</option>
                                                <option value="代办费">代办费</option>
                                                <option value="其他费">其他费</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">原厂副厂</label>
                                        <div class="col-sm-7">
                                            <select class="form-control" v-model="goods.spec5">
                                                <option value="原厂件">原厂件</option>
                                                <option value="副厂件">副厂件</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">商品等级</label>
                                        <div class="col-sm-7">
                                            <select class="form-control" v-model="goods.spec6">
                                                <option value="优">优</option>
                                                <option value="良">良</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="inputEmail1" class="col-sm-4 control-label">商品产地</label>
                                        <div class="col-sm-7">
                                            <select class="form-control" v-model="goods.proId">
                                                <option v-for="item in provinces" :value="item.proId">{{
                                                    item.province }}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-6" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                class="span1">*</span>&nbsp;厂商名称</label>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" v-model="goods.regionId"
                                                style="border-radius:4px 0px 0px 4px;" placeholder="请选择供货厂商" disabled>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="input-group" style="width: 111%;">
                                                <input type="hidden" v-model="goods.sid">
                                                <input type="text" class="form-control" disabled
                                                    v-model="goods.regionName" style="border-radius:0px 0px 0px 0px;">
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" @click="sonPageClick"
                                                        type="button"><span
                                                            class="glyphicon glyphicon-plus"></span></button>
                                                </span>
                                            </div><!-- /input-group -->
                                        </div><!-- /.col-lg-6 -->
                                    </div>
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">原厂编码</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.oldBM">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="inputEmail1" class="col-sm-4 control-label">条形码</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.itemTM">
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">包装规格</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.packSpec">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">体积A</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.spec">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3" style="margin-right: 15px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">毛重</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.grossWeight">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <label for="inputEmail1" class="col-sm-4 control-label">净重</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.netWeight">
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-12">
                                        <label for="inputEmail1" class="col-sm-4 control-label">互换码</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" style="width: 107.45%;"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.interchangeNo">
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-4" style="margin-right: 18px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;进货价&nbsp;</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" @input="inputChange"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.column1" placeholder="0.00">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-4" style="margin-right: 12px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;售价按&nbsp;</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" v-model="goods.zd3" @change="checkChange">
                                                <option value="售价表">售价表</option>
                                                <option value="加价表">加价表</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-4">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;加价率&nbsp;</label>
                                        <div class="col-sm-8">
                                            <template v-if="goods.zdInputVisible">
                                                <input type="text" class="form-control"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    @input="inputChange" placeholder="0.00" v-model="goods.mzscale"
                                                    style="width: 103%;">
                                            </template>
                                            <template v-else>
                                                <input type="text" class="form-control" disabled placeholder="0.00"
                                                    onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                    v-model="goods.mzscale" style="width: 103%;">
                                            </template>
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-4" style="margin-right: 18px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;标准价</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" placeholder="0.00"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.price">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-4" style="margin-right: 12px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;会员价</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" placeholder="0.00"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.memberPrice">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-4">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;VIP价</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" style="width: 103%;"
                                                placeholder="0.00" onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.vipPrice">
                                        </div>
                                    </div>
                                </div>
                                <!-- = -->
                                <div class="form-fiex col-sm-12">
                                    <div class="form-group col-sm-4" style="margin-right: 18px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;协议价&nbsp;</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" placeholder="0.00"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.protocolPrice">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-4" style="margin-right: 12px;">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;索赔价&nbsp;</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" placeholder="0.00"
                                                onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.claimPrice">
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-4">
                                        <label for="inputEmail1" class="col-sm-4 control-label">&nbsp;保险价&nbsp;</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" style="width: 103%;"
                                                placeholder="0.00" onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                v-model="goods.insurancePrice">
                                        </div>
                                    </div>
                                </div>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- 选择商品分类 -->
        <div class="modal fade" id="myModal11" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document" style="width: 600px !important;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel11">商品分类
                            <button type="button" class="btn btn-success" @click="goodsCategoryBtn"
                                style="padding-left: 25px; padding-right: 25px; margin-left: 60px;"><span
                                    class="glyphicon glyphicon-ok"></span> 选择</button>
                        </h4>
                    </div>
                    <div class="modal-body row" style="padding: 0px 30px;">
                        <!-- <div v-if="tempCarBrand.istrue" class="alert alert-danger" id="alert2"> -->
                        <div class="alert alert-danger" v-if="tempIstrue" id="alert2"
                            style="margin-bottom: 10px !important;">
                            <a href="#" class="close" data-dismiss="alert">
                                &times;
                            </a>
                            <strong>错误信息：</strong><span>请选择树目录</span>
                        </div>
                        <div class="coml-sm-12 tempTable">
                            <div style="height: 450px;padding-right: 0px; ">
                                <vxe-grid round border resizable show-overflow class="mytable-scrollbar" height="100%"
                                    row-id="column1" auto-resize highlight-hover-row ref="xTree3" highlight-current-row
                                    @current-change="currentChangeEventTree3" @cell-dblclick="xTree3dblclick"
                                    :tree-config="{children: 'children',indent:'40'}" :data="treeData"
                                    :columns="treeColumn3">
                                </vxe-grid>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!-- 商品查询 -->
        <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel8" role="dialog"
            aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title clearfix" id="myModalLabel8">商品查询
                            <div class="pull-right">
                                <div class="checkbox checcss">
                                    <label>
                                        <input type="checkbox" v-model="queryblockUp" @change="queryCheckBoxChange"> 停用
                                    </label>
                                </div>
                                <button type="button" class="btn btn-success" @click="requestSearchGoods(1)"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 查询</button>
                            </div>
                        </h4>
                    </div>
                    <div class="modal-body row" style="padding-right: 50px !important;">
                        <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                            <form class="form-horizontal fordiv1">
                                <div class="col-sm-12">
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品编码</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" v-model="searchGoods.goodsId">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品名称</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" v-model="searchGoods.goodsName">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品品牌</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" style="width: 103%;"
                                                    v-model="searchGoods.gbId">
                                                    <option value="">不限</option>
                                                    <option v-for="item in GoodsBrand" :value="item.gbId">
                                                        {{ item.gbName }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">适用车型</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control"
                                                    v-model="searchGoods.engineType">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-8">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品分类</label>
                                            <div class="col-sm-4">
                                                <input type="text" class="form-control" v-model="searchGoods.goodsCId2"
                                                    style="border-radius:4px 0px 0px 4px;">
                                            </div>
                                            <div class="col-lg-5">
                                                <div class="input-group" style="width: 122%;">
                                                    <input type="text" class="form-control" disabled
                                                        v-model="searchGoods.goodsCName"
                                                        style="border-radius:0px 0px 0px 0px;">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" @click="opensearchgoodstype"
                                                            type="button"><span
                                                                class="glyphicon glyphicon-plus"></span></button>
                                                    </span>
                                                </div><!-- /input-group -->
                                            </div><!-- /.col-lg-6 -->
                                        </div>

                                    </div>
                                    <!-- = -->
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px; ">
                                            <label for="inputEmail1" class="col-sm-4 control-label">零部件</label>
                                            <div class="col-sm-8">
                                                <select class="form-control">
                                                    <option>所有</option>
                                                    <option>父件</option>
                                                    <option>子件</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">收入分类</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" v-model="searchGoods.iId">
                                                    <option value="">不限</option>
                                                    <option value="工时费">工时费</option>
                                                    <option value="燃油费">燃油费</option>
                                                    <option value="代办费">代办费</option>
                                                    <option value="其他费">其他费</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1" class="col-sm-4 control-label">原厂副厂</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" style="width: 103%;"
                                                    v-model="searchGoods.spec5">
                                                    <option value="">不限</option>
                                                    <option value="原厂件">原厂件</option>
                                                    <option value="副厂件">副厂件</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px; ">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品等级</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" v-model="searchGoods.spec6">
                                                    <option value="">不限</option>
                                                    <option value="优">优</option>
                                                    <option value="良">良</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">商品产地</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" v-model="searchGoods.proId">
                                                    <option value="">不限</option>
                                                    <option v-for="item in provinces" :value="item.proId">{{
                                                        item.province }}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1" class="col-sm-4 control-label">厂商名称</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" style="width: 103%;">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px; ">
                                            <label for="inputEmail1" class="col-sm-4 control-label">原厂编码</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" v-model="searchGoods.oldBM">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">条形码</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" v-model="searchGoods.itemTM">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1" class="col-sm-4 control-label">包装规格</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" style="width: 103%;"
                                                    v-model="searchGoods.packSpec">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-fiex col-sm-12">
                                        <div class="form-group col-sm-4" style="margin-right: 18px; ">
                                            <label for="inputEmail1" class="col-sm-4 control-label">体积A</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" v-model="searchGoods.spec">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4" style="margin-right: 12px;">
                                            <label for="inputEmail1" class="col-sm-4 control-label">毛重</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control"
                                                    v-model="searchGoods.grossWeight">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-4">
                                            <label for="inputEmail1" class="col-sm-4 control-label">净重</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" style="width: 103%;"
                                                    v-model="searchGoods.netWeight">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 供货商 -->
        <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" id="myModal10"
            aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document" style="width: 1200px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title clearfix" id="myModalLabel">供货单位
                        </h4>
                    </div>
                    <div class="modal-body " style="padding: 0px !important;">
                        <div style="width: 100%; height: 580px;">
                            <iframe id=" iframe" src="supplier.html" width="100%" ref="iframe" height="100%"
                                frameborder="no" border="0" style="border: none;"></iframe>
                            <!-- transform:scale(1.1,1.1) -->
                        </div>
                        <!-- <iframe src="supplier.html" frameborder="0" style="width: 100%;  height: 550px;"></iframe> -->
                    </div>

                </div>
            </div>
        </div>
        <!-- 删除商品资料 -->
        <div class="modal fade" id="myModal9" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel9">删除确认</h4>
                    </div>
                    <div class="modal-body">
                        <h5>是否确认删除该记录？</h5>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                        <button type="button" class="btn btn-primary" @click="toremoveGoods">是</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 商品照片 -->
        <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel9" role="dialog"
            aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document" style="width: 600px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title clearfix" id="myModalLabel10">商品照片
                            <button type="button" class="btn btn-success pull-right"
                                style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                    class="glyphicon glyphicon-upload"></span>&nbsp;上传图片</button>
                        </h4>
                    </div>
                    <div class="modal-body row">
                        <div class="coml-sm-12" style="padding: 0px 20px;">
                            <div class="flexdiv" style="padding-bottom: 10px;position: relative;">
                                <span class="yuanx1 yuanx1-1">
                                    <span class="yuanx2">1</span>
                                </span>
                                <span class="yuanx1 yuanx1-2">
                                    <span class="yuanx2">2</span>
                                </span>
                                <div class="pre">
                                </div>
                                <div style="border: 0px solid rebeccapurple;">
                                    <div class=" icon-div-img">
                                        <span v-if="textHide[0]"><img :src="imgUrl[0]" alt=""></span>
                                        <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                        <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                    </div>
                                    <div class="btn-icon">
                                        <span style="display: none;"><input type="file" name="file" ref="filElem"
                                                accept="image/*" @change="getFile(0,$event)"></span>
                                        <button @click="choiceImg(0)" class="btn btn-primary"
                                            type="primary">选择图片</button>
                                        <button type="button" class="btn btn-danger">删除</button>
                                    </div>
                                </div>
                                <div style="border: 0px solid rebeccapurple; ">
                                    <div class=" icon-div-img">
                                        <span v-if="textHide[1]"><img :src="imgUrl[1]" alt=""></span>
                                        <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                        <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                    </div>
                                    <div class="btn-icon">
                                        <span style="display: none;"><input type="file" name="file" ref="filElem1"
                                                accept="image/*" @change="getFile(1,$event)"></span>
                                        <button @click="choiceImg(1)" class="btn btn-primary"
                                            type="primary">选择图片</button>
                                        <button type="button" class="btn btn-danger">删除</button>
                                    </div>
                                </div>
                            </div>
                            <div class="flexdiv" style="padding-top: 10px; border-top: 1px solid gray;">
                                <span class="yuanx1 yuanx1-3">
                                    <span class="yuanx2">3</span>
                                </span>
                                <span class="yuanx1 yuanx1-4">
                                    <span class="yuanx2">4</span>
                                </span>
                                <div style="border: 0px solid rebeccapurple;">
                                    <div class=" icon-div-img">
                                        <span v-if="textHide[2]"><img :src="imgUrl[2]" alt=""></span>
                                        <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                        <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                    </div>
                                    <div class="btn-icon">
                                        <span style="display: none;"><input type="file" name="file" ref="filElem2"
                                                accept="image/*" @change="getFile(2,$event)"></span>
                                        <button @click="choiceImg(2)" class="btn btn-primary"
                                            type="primary">选择图片</button>
                                        <button type="button" class="btn btn-danger">删除</button>
                                    </div>
                                </div>
                                <div style="border: 0px solid rebeccapurple;">
                                    <div class=" icon-div-img">
                                        <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                        <span v-if="textHide[3]"><img :src="imgUrl[3]" alt=""></span>
                                        <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                    </div>
                                    <div class="btn-icon">
                                        <span style="display: none;"><input type="file" name="file" ref="filElem3"
                                                accept="image/*" @change="getFile(3,$event)"></span>
                                        <button @click="choiceImg(3)" class="btn btn-primary"
                                            type="primary">选择图片</button>
                                        <button type="button" class="btn btn-danger">删除</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 字段设置 -->
        <div class="modal fade bs-example-modal-lg mytable-scrollbar" tabindex="-1" id="myModel10" role="dialog"
            aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document" style="width: 900px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title clearfix" id="myModalLabel2">字段设置

                        </h4>
                    </div>
                    <div class="modal-body row">
                        <div class="coml-sm-12" style="padding: 0px 30px ;">
                            <div style="height:394px;  overflow:auto;">
                                <table class="table table-bordered table-hover table-striped itemtable">
                                    <tr>
                                        <td style="width: 10%;">
                                            <div class="checkbox" style="margin: 00px;">
                                                <label>
                                                    <input type="checkbox" @click="checkAll" v-model="is_check_all">显示
                                                </label>
                                            </div>
                                        </td>
                                        <td style="width: 15%;"><span>序号</span></td>
                                        <td style="width: 25%;"><span>字段</span></td>
                                        <td style="width: 25%;"><span>字段名称</span></td>
                                        <td style="width: 25%;"><span>显示宽度</span></td>
                                    </tr>
                                    <tr v-for="item,index in settableColumn">
                                        <td class="context">
                                            <span><input type="checkbox" v-model="check_list" :value="item.num"></span>
                                        </td>
                                        <td><span>{{ item.num}}</span></td>
                                        <td><span>{{ item.field }}</span></td>
                                        <td><span>{{ item.title }}</span></td>
                                        <td @dblclick="td_dbclick(item,index)"
                                            style="padding-bottom: 0px; padding-top: 0px;">
                                            <span v-if="item.inputVislble">{{ item.widthtemp }}</span>
                                            <div v-else class="form-group inputdiv">
                                                <input type="tel" pattern="[0-9]*" :ref="item.tfocus"
                                                    v-model="item.widthtemp" class="form-control"
                                                    @blur="inputblur(item,index)" @keyup.enter="inputblur(item,index)"
                                                    oninput="value=value.replace(/[^\d]/g,'')" />
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="col-sm-12" style="text-align: right;padding-top: 10px;padding-right: 30px;">
                            <button type="button" class="btn btn-info" style="padding-right: 25px; padding-left: 25px;"
                                data-dismiss="modal">取消</button>
                            <button type=" button" class="btn btn-success" @click="updshow"
                                style="padding-right: 25px; padding-left: 25px;">保存</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 导出 -->
        <div class="modal fade bs-example-modal-lg mytable-scrollbar" tabindex="-1" id="myModel11" role="dialog"
            aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document" style="width: 600px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title clearfix" id="myModalLabel2">导出数据

                        </h4>
                    </div>
                    <div class="modal-body row">
                        <div class="col-sm-12" style="padding: 0px 60px ;">
                            <div class="form-group" style="padding-bottom: 25px !important;">
                                <div class="col-sm-3" style="line-height: 35px; text-align: right;">
                                    <strong>选择数据</strong>
                                </div>
                                <div class="col-sm-9">
                                    <select class="form-control" v-model="exportAll">
                                        <option value="0">当前数据</option>
                                        <option value="1">全量数据</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="col-sm-3" style="line-height: 280px;text-align: right;">
                                    <strong>选择字段</strong>
                                </div>
                                <div class="col-sm-9" style="height:280px;  overflow:auto;">
                                    <template>
                                        <vxe-grid border=outer :loading="loading" highlight-hover-row
                                            highlight-current-row ref="xTable4" class="mytable-scrollbar" auto-resize
                                            height="100%" :data="exportData" :columns="exportColumn"
                                            :checkbox-config="{labelField:'column1',checkAll:'true',checkField:'column2'}"
                                            @current-change="currentChangeEventExport" round show-header-overflow
                                            show-overflow>
                                        </vxe-grid>
                                    </template>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12" style="text-align: right;padding-top: 10px;padding-right: 30px;">
                            <button type="button" class="btn btn-info" style="padding-right: 25px; padding-left: 25px;"
                                data-dismiss="modal">取消</button>
                            <button type=" button" class="btn btn-success" @click="getExportSelectEvent1"
                                style="padding-right: 25px; padding-left: 25px;">导出</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 弹框提示 -->
        <div class="modal fade bs-example-modal-sm" id="myModalalertupd" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5><i class="fa fa-times" style="color: red;"></i>&nbsp;{{ hintText }}！！！</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- </div> -->
    <script src="js/jquery-1.12.4.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/bootstrap.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/xe-utils"></script>
    <script src="https://cdn.jsdelivr.net/npm/vxe-table@3.1.4"></script>

    <script src="js/bootstrap-treeview.js"></script>
    <script src="js/common.js"></script>
    <script type="text/javascript">
        //获取字段名和属性名
        // SELECT COLUMN_NAME,column_comment FROM INFORMATION_SCHEMA.Columns WHERE table_name='student' AND table_schema='myschool1913'
        var Main = {
            data() {
                return {
                    pages: {}, //分页对象
                    imgUrl: [],
                    btnChange: true,
                    //弹框提示信息
                    hintText: "",
                    //导出当前数据还是导出全部
                    exportAll: 0,
                    tempIstrue2: false,
                    blockUp: false,  //停用启用
                    queryblockUp: false,  //查询的停用启用
                    selblockUp: 1,//要查询的参数 停用启用
                    preBtnVisible: false,//上页按钮显示隐藏
                    tempIstrue: false,   //选择分类提示信息
                    treeVisble: true,
                    textHide: [false, false, false, false],
                    check_list: [],
                    isLoad: true,//只加载一次
                    is_check_all: false,
                    //分类实体
                    category: { goodsCId: "", goodsName: "", parentid: "", column1: "", showParentid: "", beforeId: "" },
                    //商品产地实体
                    provinces: { proId: "", provinceid: "", province: "" },
                    //商品品牌列表
                    GoodsBrand: { gbId: "", gbName: "" },
                    templist: [{ id: 1, name: "test" }, { id: 2, name: "test" }, { id: 3, name: "test" }, { id: 4, name: "test" }],
                    //修改 加载时查询字段及其注释加 然后再查询数据
                    //先查询加载列表 然后获取列头
                    columns: [],
                    treeColumn: [
                        { field: 'goodsName', showOverflow: true, treeNode: true, type: { expand: 'true' }, slots: { default: 'user-slot' } }
                    ],//左侧树形列配置
                    treeColumn2: [
                        { field: 'goodsCId', title: "分类编码", showOverflow: true, treeNode: true, type: { expand: 'true' } },
                        { field: 'goodsName', title: "分类名称", showOverflow: true, type: { expand: 'true' } }
                    ],
                    treeColumn3: [
                        { field: 'goodsCId', title: "分类编码", showOverflow: true, treeNode: true },
                        { field: 'goodsName', title: "分类名称", showOverflow: true, }
                    ],
                    tableColumn: [],    //显示的列
                    settableColumn: [],  //字段设置的数据源
                    setShowtableColumn: [], //提交数据库修改的数据
                    //导出列的配置
                    exportColumn: [
                        { type: 'checkbox', title: "全部字段" }
                    ],
                    //导出列的字段
                    exportData: [],
                    tableData: [],  //商品详情数据
                    treeData: [],    //左侧树形配置
                    //商品实体
                    goods: {
                        goodsAutoId: "", goodsId: "", goodsName: "", gbId: "", engineType: "", unit: "", goodsCId: "", iid: "",
                        spec5: "", spec6: "", proId: "", sid: "", oldBM: "", itemTM: "", packSpec: "", spec: "", grossWeight: "",
                        netWeight: "", mzscale: "", interchangeNo: "", zd3: "", price: "", memberPrice: "", vipPrice: "", protocolPrice: "",
                        claimPrice: "", insurancePrice: "", blockUp: "", beforeId: "", provName: "", column1: "", goodsCId2: "",
                        goodsName2: "", regionId: "", regionName: "", zdInputVisible: false
                    },
                    //供货商 iframe传值
                    iframeVue: { sid: "", provCode: "", provName: "" },
                    //品牌车型
                    tableColumn2: [
                        { field: 'carId', title: '编码', sortable: true, showOverflow: true, visible: true },
                        { field: 'carName', title: '品牌名称', sortable: true, showOverflow: true, visible: true },
                        { field: 'initial', title: '首字母', sortable: true, showOverflow: true, visible: true }
                    ],
                    //品牌车型数据
                    carData: [],
                    //查询goods实体
                    searchGoods: {
                        goodsId: "", goodsName: "", gbId: "", engineType: "", goodsCId: "", iId: "",
                        spec5: "", spec6: "", proId: "", sid: "", oldBM: "", itemTM: "", packSpec: "", spec: "", grossWeight: "",
                        netWeight: "", mzscale: "", interchangeNo: "", zd3: "", blockUp: "1", goodsCId2: ""
                    }
                }
            },
            mounted() {
                let that = this;
                window.addEventListener("message", function (e) {
                    // console.log(e.data);
                    let iframeVue = JSON.parse(JSON.stringify(e.data));
                    that.goods.sid = iframeVue.sid;
                    that.goods.regionId = iframeVue.provCode;
                    that.goods.regionName = iframeVue.provName;
                    $("#myModal10").modal("hide");
                });
            },
            methods: {
                currentChangeEventTree({ row }) {
                    this.tofindGoods(1);
                },
                currentChangeEventTree2({ row }) {

                }, currentChangeEventTree3({ row }) {
                    this.tempIstrue = false;
                },
                carBrandCurrentChangeEvent({ row }) {

                },
                currentChangeEventExport({ row }) {

                },
                //获取焦点时显示文本框
                td_dbclick(item, index) {
                    item.inputVislble = false;
                    this.$nextTick(function () {
                        this.$refs.itemName[0].focus()
                    });
                },
                //input失去焦点显示span
                inputblur(item, index) {
                    item.inputVislble = true;
                },
                //字段设置 - 点击保存
                updshow() {
                    //设置所有false
                    this.settableColumn.forEach(item => item.visible = false);
                    //遍历checklist 选中的为true
                    this.settableColumn.forEach((item) => {
                        this.check_list.forEach(arr => {
                            if (arr == item.num) { item.visible = true; }
                        })
                        item.width = item.widthtemp;
                    });
                    this.setShowtableColumn = [];
                    this.settableColumn.forEach((item) => {
                        this.setShowtableColumn.push({
                            columnWidth: item.width,
                            columnVisible: item.visible == true ? 1 : 0,
                            columnId: item.params.columnId
                        })
                    });

                    // console.log(this.setShowtableColumn);
                    //调用方法更新配置
                    this.updateTableColumn();

                },
                //获取列头
                gettableColumns() {
                    // 获取所有列配置
                    this.$nextTick(() => {
                        this.columns = this.$refs.xTable.getColumns();
                        // console.log(JSON.stringify(this.$refs.xTable.getColumns()))
                    })
                },
                //全选 =============字段修改出现异常----修改集合名称===============
                checkAll() {
                    if (this.tableColumn.length == this.check_list.length) {
                        this.check_list = [];
                    } else {
                        this.check_list = this.tableColumn.map(item => item.num)
                    }
                },
                currentChangeEvent({
                    row
                }) {
                    console.log('行选中事件')
                },
                //点击触发 file
                choiceImg(index) {
                    if (index == 0) {
                        this.$refs.filElem.dispatchEvent(new MouseEvent('click'));
                    } else if (index == 1) {
                        this.$refs.filElem1.dispatchEvent(new MouseEvent('click'));
                    } else if (index == 2) {
                        this.$refs.filElem2.dispatchEvent(new MouseEvent('click'));
                    } else if (index == 3) {
                        this.$refs.filElem3.dispatchEvent(new MouseEvent('click'));
                    }
                },
                getFile(index, e) {
                    console.log("成功");
                    let _this = this;
                    var files = e.target.files[0];
                    /*图片类型正则验证*/
                    var imgStr = /\.(jpg|jpeg|png|bmp|BMP|JPG|PNG|JPEG)$/;
                    console.log(typeof e.target.files[0])
                    if (typeof e.target.files[0] == 'undefined') {
                        return false;
                    }
                    if (files.name == "") {
                        alert("请选择图片");
                        return false;
                    }
                    else {
                        if (!imgStr.test(files.name)) {
                            alert("文件不是图片类型");
                            return false;
                        } else {
                            /*图片大小*/
                            var imagSize = files.size;
                            if (!imagSize < (1024 * 1024 * 5)) {
                                if (!e || !window.FileReader) return  // 判断是否支持FileReader
                                let reader = new FileReader()
                                reader.readAsDataURL(files) // 文件转换
                                reader.onloadend = function () {
                                    // _this.imgUrl[index] = this.result;
                                    // _this.textHide[index] = true;
                                    _this.$set(_this.imgUrl, index, this.result);
                                    _this.$set(_this.textHide, index, true);
                                    // console.log(index);
                                    // console.log(_this.imgUrl);
                                    // console.log(_this.textHide);
                                }
                            } else {
                                alert(files.name + "大小不能超过" + 5 + "M");
                                return false;
                            }
                        }
                    }
                },
                //左侧tree切换显示
                switchTo() {
                    this.treeVisble = this.treeVisble == true ? false : true;
                },
                /*
                    查询左侧树形
                */
                find() {
                    this.loading = true
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goodsCategory",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.loading = false;
                                that.treeData = result.data;
                                if (that.treeData.length > 0 && that.isLoad == true) {
                                    // that.$refs.xTree.setCurrentRow(that.treeData[0]);
                                    that.tofindGoods(1);
                                    that.isLoad = false;
                                }
                            })
                        }
                    });
                },
                /*
                    分类同级新增唤起模态框
                */
                openInsGoodsCategory() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" && json.length > 0) {
                        this.initCategory();
                        let pojo = JSON.parse(json)
                        this.category.parentid = pojo.parentid;
                        // this.category.showParentid = this.category.parentid == 0 ? '' : this.forById(pojo.parentid);
                        this.category.parentid == 0 ? this.category.showParentid = '' : this.forById(pojo.parentid);
                        $("#myModal").modal("show");
                    }
                },
                /*
                    分类子级新增唤起模态框
                */
                openInsGoodsCategorychil() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" && json.length > 0) {
                        this.initCategory();
                        let pojo = JSON.parse(json)
                        this.category.parentid = pojo.column1;
                        this.category.showParentid = pojo.goodsCId;
                        $("#myModal").modal("show");
                    }
                },
                /*
                    查询父级编号
                */
                forById(parentid) {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goodsCategory/pid/" + parentid,
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.$set(that.category, 'showParentid', that.category.parentid == 0 ? '' : result.data);
                            })
                        }, error: function (error) {
                            console.log(error);
                        }
                    });

                },
                /*
                    初始化category对象
                */
                initCategory() {
                    this.category.goodsCId = "";
                    this.category.goodsName = "";
                    this.category.parentid = "";
                    this.category.column1 = "";
                    this.category.showParentid = "";
                    this.category.beforeId = "";
                },
                /*
                    新增保存模态框
                */
                /*
                    新增商品分类
                */
                insCategory() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goodsCategory/ins",
                        type: "post",
                        data: JSON.stringify(that.category),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.find();
                                $("#myModal").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                    唤起修改分类模态框
                */
                openUpdCategory() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" && json.length > 0) {
                        this.initCategory();
                        let pojo = JSON.parse(json);
                        if (pojo.children.length == 0) {
                            this.initCategory();
                            this.category = pojo;
                            this.category.goodsCId = pojo.goodsCId;
                            this.category.goodsName = pojo.goodsName;
                            this.category.column1 = pojo.column1;
                            this.category.beforeId = pojo.goodsCId;
                            this.category.parentid = pojo.parentid;
                            this.category.parentid == 0 ? this.category.showParentid = '' : this.forById(pojo.parentid);
                            $("#myModal2").modal("show");
                        } else {
                            $("#myModalalert").modal("show");
                            setTimeout(() => {
                                $("#myModalalert").modal("hide");
                            }, 2000);
                        }
                    }
                },
                /*
                    修改分类
                */
                updCategory() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goodsCategory/upd",
                        type: "post",
                        data: JSON.stringify(that.category),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.find();
                                $("#myModal2").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                    删除分类模态框               
                */
                openRemodeCategory() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" && json.length > 0) {
                        let pojo = JSON.parse(json);
                        if (pojo.children.length == 0) {
                            $("#myModal4").modal("show");
                        } else {
                            $("#myModalalertdel").modal("show");
                            setTimeout(() => {
                                $("#myModalalertdel").modal("hide");
                            }, 2000);
                        }
                    }
                },
                /*
                    发送请求删除
                */
                removeCategory() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goodsCategory/del/" + that.$refs.xTree.getCurrentRecord().column1,
                        type: "post",
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.isLoad = true;
                                that.find();
                                $("#myModal4").modal("hide");
                            } else if (result.code == 1005) {
                                console.log("参数校验失败，ID不能为空");
                            } else if (result.code == 1007) {
                                console.log("删除失败，下面有子目录");
                            }
                        }
                    });
                },
                /*
                    查询商品详情
                */
                tofindGoods(current) {
                    this.loading = true;
                    this.initSearchGoods();
                    ; this.btnChange = true;
                    let that = this;
                    let json = that.$refs.xTree.getCurrentRecord();
                    let column1 = 0;
                    try {
                        column1 = that.isLoad == true ? 0 : json.column1;
                    } catch (error) {
                        column1 = 0;
                    }
                    $.ajax({
                        url: "http://127.0.0.1:8080/goods/find",
                        data: {
                            current: current,
                            blockUp: that.selblockUp,
                            column1: column1
                        },
                        type: "post",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.loading = false;
                                that.tableData = result.data.records;
                                that.pages = result.data;
                                if (that.tableData.length > 0) {
                                    that.$refs.xTable.setCurrentRow(that.tableData[0]);
                                }
                            })
                        }
                    });
                },
                /*
                    字段设置=============

                    查询数据库显示字段
                */
                findShowColumn() {
                    this.loading = true;
                    this.check_list = [];
                    var that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/dzwColumnController/showcolumngoods",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            that.tableColumn = [];
                            that.loading = false;
                            handlerResult(result, () => {
                                result.data.forEach((item, index) => {
                                    that.tableColumn.push({
                                        num: index + 1,
                                        field: item.columnName,
                                        title: item.column1,
                                        sortable: true,
                                        showOverflow: true,
                                        width: item.columnWidth,
                                        visible: item.columnVisible == 1 ? true : false,
                                        inputVislble: true,
                                        widthtemp: item.columnWidth,
                                        tfocus: 'itemName',
                                        params: item,
                                        formatter: 'formatNull'
                                    })
                                })
                            })
                        }
                    });
                },/*
                    查询显示字段
                */
                find_ShowColumn() {
                    var that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/dzwColumnController/showcolumngoods",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.check_list = [];
                                that.settableColumn = [];
                                result.data.forEach((item, index) => {
                                    that.settableColumn.push({
                                        num: index + 1,
                                        field: item.columnName,
                                        title: item.column1,
                                        sortable: true,
                                        showOverflow: true,
                                        width: item.columnWidth,
                                        visible: item.columnVisible == 1 ? true : false,
                                        inputVislble: true,
                                        widthtemp: item.columnWidth,
                                        tfocus: 'itemName',
                                        params: item
                                    })
                                });
                                that.settableColumn.forEach(item => {
                                    if (item.visible == true) {
                                        that.check_list.push(item.num);;
                                    }
                                })
                            })
                        }
                    });
                },
                /*
                    修改列配置
                */
                updateTableColumn() {
                    var that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/dzwColumnController/upd",
                        type: "post",
                        data: JSON.stringify(that.setShowtableColumn),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findShowColumn();
                                //查询查询配置列信息
                                // this.findShowColumn();
                                //循环进行修改页面 table 配置信息
                                let obj = JSON.parse(JSON.stringify(that.tableColumn))
                                //循环tbale配置对象 将tableColumn相同的属性值赋值给columns
                                that.columns.forEach((value, key) => {
                                    value.width = obj[key].width;
                                    value.visible = obj[key].visible;
                                })
                                that.$refs.xTable.refreshColumn();
                                $("#myModel10").modal("hide");
                            }
                        }
                    });
                },
                /*
                    字段设置模态框
                */
                columnModal() {
                    this.find_ShowColumn();
                    $("#myModel10").modal("show");
                },
                /*
                    查询商品品牌列表
                */
                selGoodsBrand() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goodsBrand",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.GoodsBrand = result.data;
                            })
                        }
                    });
                },
                /*
                
                */
                checkChange() {
                    this.goods.mzscale = "";
                    if (this.goods.zd3 == "加价表") {
                        Vue.set(this.goods, "zdInputVisible", true) //这样就能被vue监控到，更新视图 
                    } else {
                        Vue.set(this.goods, "zdInputVisible", false) //这样就能被vue监控到，更新视图 
                        this.inputChange();
                    }
                },
                /*
                    停用/启用
                */
                checkbox() {
                    if (event.target.checked == true) {
                        this.goods.blockUp = 0;
                        this.blockUp = true;
                    } else {
                        this.goods.blockUp = 1;
                        this.blockUp = false;
                    }
                },
                // @change="checkChange">
                /*
                    查询
                */
                selProvinces() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/provinces",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.provinces = result.data;
                            })
                        }
                    });
                },
                /*
                    初始化商品对象
                */
                initGoods() {
                    this.goods.goodsAutoId = "";
                    this.goods.goodsId = "";
                    this.goods.goodsName = "";
                    this.goods.gbId = 1;
                    this.goods.engineType = "";
                    this.goods.unit = "件";
                    this.goods.goodsCId = "";
                    this.goods.iid = "工时费";
                    this.goods.spec5 = "原厂件";
                    this.goods.spec6 = "优";
                    this.goods.proId = 1;
                    this.goods.sid = "";
                    this.goods.oldBM = "";
                    this.goods.itemTM = "";
                    this.goods.packSpec = "";
                    this.goods.spec = "";
                    this.goods.grossWeight = "";
                    this.goods.netWeight = "";
                    this.goods.mzscale = "";
                    this.goods.interchangeNo = "";
                    this.goods.zd3 = "售价表";
                    this.goods.price = "";
                    this.goods.memberPrice = "";
                    this.goods.vipPrice = "";
                    this.goods.protocolPrice = "";
                    this.goods.claimPrice = "";
                    this.goods.insurancePrice = "";
                    //停用启用
                    this.goods.blockUp = 1;
                    this.goods.beforeId = "";
                    this.goods.provName = "";
                    this.goods.column1 = "";
                    //商品类别
                    this.goods.goodsCId2 = "";
                    this.goods.goodsName2 = "";
                    //供货厂商
                    this.goods.regionId = "";
                    this.goods.regionName = "";
                    //售价表
                    this.goods.zdInputVisible = false;
                },
                /*
                    唤起新增商品模态框
                */
                openInsGoods() {
                    this.initGoods();
                    //商品品牌
                    this.selGoodsBrand();
                    //产地
                    this.selProvinces();
                    $("#myModel6").modal("show");
                },
                /*
                    新增时选择商品分类
                */
                goodsCategoryBtn() {
                    let json = this.$refs.xTree3.getCurrentRecord();
                    if (json == null) {
                        this.tempIstrue = true;
                    } else {
                        this.goods.goodsCId2 = json.goodsCId;
                        this.goods.goodsName2 = json.goodsName;
                        this.goods.goodsCId = json.column1;
                        $("#myModal11").modal("hide");
                    }
                },
                /*
                    xtree3双击事件
                */
                xTree3dblclick({ row }) {
                    let json = this.$refs.xTree3.getCurrentRecord();
                    this.goods.goodsCId = json.column1;
                    this.goods.goodsCId2 = json.goodsCId;
                    this.goods.goodsName2 = json.goodsName;
                    $("#myModal11").modal("hide");
                },
                //子页面像传值过来
                sonPageClick() {
                    $("#myModal10").modal("show");
                    //像子页面传值
                    this.iframe = this.$refs.iframe
                    this.iframeWindow = this.iframe.contentWindow
                    let message = false;
                    this.iframeWindow.postMessage(message, '*')
                },
                /*
                    发送请求添加商品
                */
                saveGoods() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goods/ins",
                        type: "post",
                        data: JSON.stringify(that.goods),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.tofindGoods(1);
                                $("#myModel6").modal("hide");
                            } else if (result.code == 3000) {
                                console.log("主键已经存在");
                            } else {
                                console.log("刷新重试");
                            }
                        }
                    });
                },
                /*
                    弹起修改商品商品信息模态框
                */
                openUpdGoods() {
                    let json = this.$refs.xTable.getCurrentRecord();
                    if (json != null) {
                        this.initGoods();
                        //商品品牌
                        this.selGoodsBrand();
                        //产地
                        this.selProvinces();
                        let pojo = JSON.parse(JSON.stringify(json));
                        this.goods = pojo;
                        this.goods.beforeId = pojo.goodsId;
                        this.goods.goodsCId2 = pojo.goodsCategory.goodsCId;
                        this.goods.goodsName2 = pojo.goodsCategory.goodsName;
                        this.goods.regionId = pojo.suppliersRegion.provCode;
                        this.goods.regionName = pojo.suppliersRegion.provName;
                        this.blockUp = this.goods.blockUp == 1 ? false : true;
                        if (this.goods.zd3 == "加价表") {
                            Vue.set(this.goods, "zdInputVisible", true) //这样就能被vue监控到，更新视图 
                        } else {
                            Vue.set(this.goods, "zdInputVisible", false) //这样就能被vue监控到，更新视图 
                        }
                        $("#myModel7").modal("show");
                    }
                },
                /*
                发送请求修改商品信息
                */
                saveUpdGoods() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goods/upd",
                        type: "post",
                        data: JSON.stringify(that.goods),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.tofindGoods(1);
                                $("#myModel7").modal("hide");
                            } else if (result.code == 3000) {
                                console.log("主键已经存在");
                            } else {
                                console.log("刷新重试");
                            }
                        }
                    });
                },
                /*
                    删除商品模态框
                */
                removeGoods() {
                    let json = this.$refs.xTable.getCurrentRecord();
                    if (json != null) {
                        $("#myModal9").modal("show");
                    }
                },
                /*发送请求逻辑删除*/
                toremoveGoods() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goods/remove",
                        type: "post",
                        data: { goodsAutoId: that.$refs.xTable.getCurrentRecord().goodsAutoId },
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.tofindGoods(1);
                                $("#myModal9").modal("hide");
                            } else if (result.code == 3000) {
                                console.log("主键已经存在");
                            } else {
                                console.log("刷新重试");
                            }
                        }
                    });
                },
                /*
                    formatprice
                */
                keepTwoDecimalFull(num) {
                    var result = parseFloat(num);
                    if (isNaN(result)) {
                        console.log("传入了非数字");
                        return false;
                    }
                    result = Math.round(num * 100) / 100;
                    var s_x = result.toString();
                    var pos_decimal = s_x.indexOf('.');
                    if (pos_decimal < 0) {
                        pos_decimal = s_x.length;
                        s_x += '.';
                    }
                    while (s_x.length <= pos_decimal + 2) {
                        s_x += '0';
                    }
                    return s_x;
                },
                /*
                    换算进货价
                */
                inputChange() {
                    let num = this.goods.column1;
                    if (this.goods.zdInputVisible) {
                        let mzscale = this.goods.mzscale || 0;
                        this.goods.price = this.keepTwoDecimalFull(num * 1 * mzscale);
                        this.goods.memberPrice = this.keepTwoDecimalFull(num * 0.95 * mzscale);
                        this.goods.vipPrice = this.keepTwoDecimalFull(num * 0.9 * mzscale);
                        this.goods.protocolPrice = this.keepTwoDecimalFull(num * 1.1 * mzscale);
                        this.goods.claimPrice = this.keepTwoDecimalFull(num * 1 * mzscale);
                        this.goods.insurancePrice = this.keepTwoDecimalFull(num * 1.3 * mzscale);
                    } else {
                        this.goods.price = this.keepTwoDecimalFull(num * 1.5);
                        this.goods.memberPrice = this.keepTwoDecimalFull(num * 1.43);
                        this.goods.vipPrice = this.keepTwoDecimalFull(num * 1.35);
                        this.goods.protocolPrice = this.keepTwoDecimalFull(num * 1.65);
                        this.goods.claimPrice = this.keepTwoDecimalFull(num * 1.5);
                        this.goods.insurancePrice = this.keepTwoDecimalFull(num * 1.95);
                    }
                },
                /*
                    商品图片模态框
                */
                openGoodsIconModal() {
                    let json = this.$refs.xTable.getCurrentRecord();
                    if (json != null) {
                        var file = document.getElementsByName("file").forEach(item => item.value = null);
                        $("#myModel9").modal("show");
                    }
                },
                /*
                    上传图片
                */
                uploadIcon() {
                    var formdata = new FormData();
                },
                /*
                    商品查询模态框
                */
                openSelGoods() {
                    //商品品牌
                    this.selGoodsBrand();
                    //产地
                    this.selProvinces();
                    $("#myModel8").modal("show");
                },
                queryCheckBoxChange() {
                    if (event.target.checked == true) {
                        this.searchGoods.blockUp = 0;
                        this.queryblockUp = true;
                    } else {
                        this.searchGoods.blockUp = 1;
                        this.queryblockUp = false;
                    }
                },
                /*
                    初始化查询对象
                */
                initSearchGoods() {
                    this.searchGoods.goodsId = "";
                    this.searchGoods.goodsName = "";
                    this.searchGoods.gbId = "";
                    this.searchGoods.engineType = "";
                    this.searchGoods.goodsCId = "";
                    this.searchGoods.goodsCName = "";
                    this.searchGoods.iId = "";
                    this.searchGoods.spec5 = "";
                    this.searchGoods.proId = "";
                    this.searchGoods.sid = "";
                    this.searchGoods.oldBM = "";
                    this.searchGoods.packSpec = "";
                    this.searchGoods.spec = "";
                    this.searchGoods.grossWeight = "";
                    this.searchGoods.netWeight = "";
                    this.searchGoods.mzscale = "";
                    this.searchGoods.interchangeNo = "";
                    this.searchGoods.zd3 = "";
                    this.searchGoods.blockUp = "1";
                    this.searchGoods.goodsCId2 = "";

                },
                /*
                    按条件查询商品分页
                */
                requestSearchGoods(current) {
                    this.btnChange = false;
                    let that = this;
                    that.loading = true;
                    that.searchGoods.current = current;
                    $.ajax({
                        url: "http://127.0.0.1:8080/goods/searchgoods",
                        type: "post",
                        data: that.searchGoods,
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                handlerResult(result, () => {
                                    that.loading = false;
                                    that.tableData = result.data.records;
                                    that.pages = result.data;
                                    if (that.tableData.length > 0) {
                                        that.$refs.xTable.setCurrentRow(that.tableData[0]);
                                    }
                                })
                                $("#myModel8").modal("hide");
                            } else {
                                console.log("刷新重试");
                            }
                        }
                    });
                },
                /*
                    控制上页下页中 是按条件查询还是查询所有
                */
                btnFindChange(current) {
                    this.btnChange ? this.tofindGoods(current) : this.requestSearchGoods(current);
                },
                /* 查询时商品分类*/
                opensearchgoodstype() {
                    this.tempIstrue2 = false;
                    $("#myModal3").modal("show");
                },
                /*查询时商品品牌选择 */
                btnxuanz() {
                    let json = this.$refs.xTree2.getCurrentRecord();
                    if (json == null) {
                        this.tempIstrue2 = true;
                    } else {
                        this.tempIstrue2 = false;
                        this.searchGoods.goodsCId = json.column1;
                        this.searchGoods.goodsCId2 = json.goodsCId;
                        this.searchGoods.goodsCName = json.goodsName;
                        $("#myModal3").modal("hide");
                    }
                },
                xTree3dblclick2({ row }) {
                    let json = this.$refs.xTree2.getCurrentRecord();
                    this.searchGoods.goodsCId = json.column1;
                    this.searchGoods.goodsCId2 = json.goodsCId;
                    this.searchGoods.goodsCName = json.goodsName;
                    $("#myModal3").modal("hide");
                },
                /* 商品信息导出模态框 */
                exportExcelModal() {
                    this.findExportColumn();
                    this.exportAll = 0;
                    $("#myModel11").modal("show");
                },
                /*
                    导出时查询数据库字段
                */
                findExportColumn() {
                    this.loading = true;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/dzwColumnController/showcolumngoods",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            that.exportData = [];
                            that.loading = false;
                            handlerResult(result, () => {
                                that.exportData = result.data;
                                if (that.exportData) {
                                    that.$refs.xTable4.setCheckboxRow(that.exportData, true);
                                }
                            })
                        }
                    });
                },
                /*
                    保存复选框选中结果
                */
                getExportSelectEvent1() {
                    let selectRecords = this.$refs.xTable4.getCheckboxRecords();
                    if (selectRecords.length == 0) {
                        this.hintText = "请勾选要导出的列";
                        $("#myModalalertupd").modal("show");
                        setTimeout(() => {
                            $("#myModalalertupd").modal("hide");
                        }, 2000);
                    } else {
                        $("#myModel11").modal("hide");
                        if (this.exportAll === 0) {
                            console.log("当前");
                            //当前内容导出时 如果没有按条件搜索则按当前商品分类查找
                            //btnChange 为false时 按多条件查询搜索 否则按商品分类进行查找
                            if (this.btnChange) {
                                let goods = this.$refs.xTree.getCurrentRecord();
                                let column1 = 0;
                                try {
                                    column1 = this.isLoad == true ? 0 : goods.column1;
                                } catch (error) {
                                    column1 = 0;
                                }
                                let json = JSON.stringify(selectRecords);
                                let blockUp = this.selblockUp
                                var form = $('<form />', { action: 'http://127.0.0.1:8080/goods/downloadexceleearch', method: "get", style: "display:none;" }).appendTo('body');
                                form.append('<input type="hidden" name="blockUp" value="' + blockUp + '" />');
                                form.append('<input type="hidden" name="column1" value="' + column1 + '" />');
                                form.append('<textarea name="exportColumn" id="" cols="30" rows="10">"' + json + '"</textarea>');
                                form.submit().remove();
                            } else {
                                let json = JSON.stringify(selectRecords);
                                let goods = JSON.stringify(this.searchGoods);
                                var form = $('<form />', { action: 'http://127.0.0.1:8080/goods/downloadexcel', method: "get", style: "display:none;" }).appendTo('body');
                                form.append('<textarea name="jsonGoods" id="" cols="30" rows="10">"' + goods + '"</textarea>');
                                form.append('<textarea name="exportColumn" id="" cols="30" rows="10">"' + json + '"</textarea>');
                                form.submit().remove();
                            }

                        } else {
                            console.log("全部");
                            let json = JSON.stringify(selectRecords);
                            var form = $('<form />', { action: 'http://127.0.0.1:8080/goods/downloadexcelall', method: "get", style: "display:none;" }).appendTo('body');
                            // form.append('<input type="hidden" name="exportColumn" value="' + format + '" />');
                            form.append('<textarea name="exportColumn" id="" cols="30" rows="10">"' + json + '"</textarea>');
                            form.submit().remove();
                        }
                    }
                }
            },
            created() {
                this.find();
                //查询显示列
                this.findShowColumn()
                //获取列表可视的列
                this.gettableColumns();
            }
            ,
            watch: {
                check_list() {
                    if (this.tableColumn.length == this.check_list.length) {
                        this.is_check_all = true;
                    } else {
                        this.is_check_all = false;
                    }
                }
            }
        }
        var Ctor = Vue.extend(Main);

        new Ctor().$mount('.container-fluid');
        $('.dropdown-toggle').dropdown()

        //控制模态框层级
        $(document).ready(function () {
            // 通过该方法来为每次弹出的模态框设置最新的zIndex值，从而使最新的modal显示在最前面
            $(document).on('show.bs.modal', '.modal', function () {
                var zIndex = 1040 + (10 * $('.modal:visible').length);
                $(this).css('z-index', zIndex);
                setTimeout(function () {
                    $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
                }, 0);
            });
        });

        VXETable.formats.mixin({
            // 格式化性别
            formatSex({ cellValue }) {
                return cellValue ? (cellValue === '1' ? '男' : '女') : ''
            },
            formatNull({ cellValue }) {
                return cellValue ? cellValue : '-'
            },
            // 格式化下拉选项
            formatSelect({ cellValue }, list) {
                const item = list.find(item => item.value === cellValue)
                return item ? item.label : ''
            },
            // 格式化日期，默认 yyyy-MM-dd HH:mm:ss
            formatDate({ cellValue }, format) {
                return XEUtils.toDateString(cellValue, format || 'yyyy-MM-dd HH:mm:ss')
            },
            // 四舍五入金额，每隔3位逗号分隔，默认2位数
            formatAmount({ cellValue }, digits = 2) {
                return XEUtils.commafy(XEUtils.toNumber(cellValue), { digits })
            },
            // 格式化银行卡，默认每4位空格隔开
            formatBankcard({ cellValue }) {
                return XEUtils.commafy(XEUtils.toString(cellValue), { spaceNumber: 4, separator: ' ' })
            },
            // 四舍五入,默认两位数
            formatFixedNumber({ cellValue }, digits = 2) {
                return XEUtils.toFixed(XEUtils.round(cellValue, digits), digits)
            },
            // 向下舍入,默认两位数
            formatCutNumber({ cellValue }, digits = 2) {
                return XEUtils.toFixed(XEUtils.floor(cellValue, digits), digits)
            },
            // 转换 moment 类型为字符串
            toMomentString({ cellValue }, format) {
                return cellValue ? cellValue.format(format) : ''
            }
        })
    </script>
</body>

</html>