"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEnableConf=isEnableConf,exports.default=exports.UtilTools=void 0;var _ctor=_interopRequireDefault(require("xe-utils/ctor")),_conf=_interopRequireDefault(require("../../conf")),_formats=_interopRequireDefault(require("../../v-x-e-table/src/formats"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var zindexIndex=0,lastZindex=1,ColumnInfo=function(){function m(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=t.renderHeader,n=t.renderCell,l=t.renderFooter,i=t.renderData;_classCallCheck(this,m);var a=e.$xegrid,u=a?a.proxyOpts:null,s=r.formatter,c=!_ctor.default.isBoolean(r.visible)||r.visible;if("development"===process.env.VUE_APP_VXE_TABLE_ENV){var d=["seq","checkbox","radio","expand","html"];if(r.type&&-1===d.indexOf(r.type)&&UtilTools.warn("vxe.error.errProp",["type=".concat(r.type),d.join(", ")]),(_ctor.default.isBoolean(r.cellRender)||r.cellRender&&!_ctor.default.isObject(r.cellRender))&&UtilTools.warn("vxe.error.errProp",["column.cell-render=".concat(r.cellRender),"column.cell-render={}"]),(_ctor.default.isBoolean(r.editRender)||r.editRender&&!_ctor.default.isObject(r.editRender))&&UtilTools.warn("vxe.error.errProp",["column.edit-render=".concat(r.editRender),"column.edit-render={}"]),r.cellRender&&r.editRender&&UtilTools.warn("vxe.error.errConflicts",["column.cell-render","column.edit-render"]),"expand"===r.type&&e.treeConfig&&e.treeOpts.line&&UtilTools.error("vxe.error.errConflicts",["tree-config.line","column.type=expand"]),r.remoteSort&&UtilTools.warn("vxe.error.delProp",["column.remote-sort","sort-config.remote"]),r.sortMethod&&UtilTools.warn("vxe.error.delProp",["column.sort-method","sort-config.sortMethod"]),s)if(_ctor.default.isString(s)){var f=_formats.default.get(s)||_ctor.default[s];_ctor.default.isFunction(f)||UtilTools.error("vxe.error.notFunc",[s])}else if(_ctor.default.isArray(s)){var p=_formats.default.get(s[0])||_ctor.default[s[0]];_ctor.default.isFunction(p)||UtilTools.error("vxe.error.notFunc",[s[0]])}}Object.assign(this,{type:r.type,property:r.field,title:r.title,width:r.width,minWidth:r.minWidth,resizable:r.resizable,fixed:r.fixed,align:r.align,headerAlign:r.headerAlign,footerAlign:r.footerAlign,showOverflow:r.showOverflow,showHeaderOverflow:r.showHeaderOverflow,showFooterOverflow:r.showFooterOverflow,className:r.className,headerClassName:r.headerClassName,footerClassName:r.footerClassName,formatter:s,sortable:r.sortable,sortBy:r.sortBy,sortMethod:r.sortMethod,remoteSort:r.remoteSort,filters:UtilTools.getFilters(r.filters),filterMultiple:!_ctor.default.isBoolean(r.filterMultiple)||r.filterMultiple,filterMethod:r.filterMethod,filterRender:r.filterRender,treeNode:r.treeNode,cellType:r.cellType,cellRender:r.cellRender,editRender:r.editRender,contentRender:r.contentRender,exportMethod:r.exportMethod,footerExportMethod:r.footerExportMethod,titleHelp:r.titleHelp,params:r.params,id:r.colId||_ctor.default.uniqueId("col_"),parentId:null,visible:c,halfVisible:!1,defaultVisible:c,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:o||r.renderHeader,renderCell:n||r.renderCell,renderFooter:l||r.renderFooter,renderData:i,slots:r.slots}),u&&u.beforeColumn&&u.beforeColumn({$grid:a,column:this})}return _createClass(m,[{key:"getTitle",value:function(){return UtilTools.getFuncText(this.title||("seq"===this.type?_conf.default.i18n("vxe.table.seqTitle"):""))}},{key:"getKey",value:function(){return this.property||(this.type?"type=".concat(this.type):null)}},{key:"update",value:function(e,r){"filters"!==e&&("field"===e?this.property=r:this[e]=r)}}]),m}();function isEnableConf(e){return e&&!1!==e.enabled}function outLog(o){return function(e,r){var t=UtilTools.getLog(e,r);return console[o](t),t}}var UtilTools={warn:outLog("warn"),error:outLog("error"),getLog:function(e,r){return"[vxe-table] ".concat(_conf.default.i18n(e,r))},getFuncText:function(e){return _ctor.default.isFunction(e)?e():_conf.default.translate?_conf.default.translate(e):e},nextZIndex:function(){return lastZindex=_conf.default.zIndex+zindexIndex++},getLastZIndex:function(){return lastZindex},getRowkey:function(e){return e.rowId||"_XID"},getRowid:function(e,r){var t=_ctor.default.get(r,UtilTools.getRowkey(e));return t?encodeURIComponent(t):""},getColumnList:function(e){var r=[];return e.forEach(function(e){r.push.apply(r,_toConsumableArray(e.children&&e.children.length?UtilTools.getColumnList(e.children):[e]))}),r},getClass:function(e,r){return e?_ctor.default.isFunction(e)?e(r):e:""},getFilters:function(e){return e&&_ctor.default.isArray(e)?e.map(function(e){var r=e.label,t=e.value,o=e.data,n=e.resetValue,l=e.checked;return{label:r,value:t,data:o,resetValue:n,checked:!!l,_checked:!!l}}):e},formatText:function(e,r){return""+(""===e||null==e?r?_conf.default.emptyCell:"":e)},getCellValue:function(e,r){return _ctor.default.get(e,r.property)},setCellValue:function(e,r,t){return _ctor.default.set(e,r.property,t)},isColumn:function(e){return e instanceof ColumnInfo},getColumnConfig:function(e,r,t){return UtilTools.isColumn(r)?r:new ColumnInfo(e,r,t)},assemColumn:function(e){var r=e.$el,t=e.$xetable,o=e.$xecolumn,n=e.columnConfig,l=o?o.columnConfig:null;n.slots=e.$scopedSlots,l?("development"===process.env.VUE_APP_VXE_TABLE_ENV&&"vxe-table-column"===o.$options._componentTag&&UtilTools.warn("vxe.error.groupTag",["<vxe-table-colgroup title=".concat(o.title," ...>"),"<vxe-table-column title=".concat(o.title," ...>")]),l.children||(l.children=[]),l.children.splice([].indexOf.call(o.$el.children,r),0,n)):t.staticColumns.splice([].indexOf.call(t.$refs.hideColumn.children,r),0,n)},destroyColumn:function(e){var r=e.$xetable,t=e.columnConfig,o=_ctor.default.findTree(r.staticColumns,function(e){return e===t});o&&o.items.splice(o.index,1)},hasChildrenList:function(e){return e&&e.children&&0<e.children.length},parseFile:function(e){var r=e.name,t=_ctor.default.lastIndexOf(r,"."),o=r.substring(t+1,r.length);return{filename:r.substring(0,t),type:o}},isNumVal:function(e){return!isNaN(parseFloat(""+e))}},_default=exports.UtilTools=UtilTools;exports.default=_default;