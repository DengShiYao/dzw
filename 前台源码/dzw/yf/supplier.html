<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>供货单位</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/supplier.css">
    <link rel="stylesheet" href="css/public-y.css">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="package/lib/style.css">
</head>

<body class="hea-div">
    <div class="container-fluid" style="height: 100%;">
        <div class="row" style="height: 100%;padding: 0px 0px !important;">
            <div style=" border: 0px solid red; padding: 0px 0px !important;" class="col-sm-12">
                <div class="col-sm-12 clearfix nav-div" style="border: 0px solid rebeccapurple;">
                    <h3 class="clearfix" style="margin-top: 10px;">供货单位
                        <button class="btn btn-default pull-right btnexit" type="button">关闭</button>
                        <div class="pull-right" style="margin-right: 10px !important;">
                            <form class="form-inline">
                                <div class="form-group">
                                    <input type="text" class="form-control" style="width: 300px;"
                                        placeholder="匹配编码/名称/名称简写">
                                </div>
                                <button type="button" class="btn btn-warning selbtn">搜索</button>
                            </form>
                        </div>
                    </h3>
                </div>
            </div>
            <div class="col-sm-12 flexdiv" style="border: 0px solid red;">
                <div>
                    <vxe-toolbar>
                        <template v-slot:buttons>
                            <div class="dropdown" style="display: inline-block;">
                                <vxe-button data-toggle="dropdown" id="dropdownMenu1" class="dropdown-toggle"
                                    aria-expanded="true">分类编辑
                                    <span class="caret"></span>
                                </vxe-button>
                                <ul class="dropdown-menu nav-li" role="menu" aria-labelledby="dropdownMenu1">
                                    <li role="presentation">
                                        <!-- <vxe-button icon="glyphicon glyphicon-plus" data-toggle="modal"
                                            data-target="#myModal">
                                            增加同级分类
                                        </vxe-button> -->
                                        <a role="menuitem" tabindex="-1" @click="show_insRegionCity">增加同级</a>
                                    </li>
                                    <li role="presentation">
                                        <!-- <vxe-button icon="glyphicon glyphicon-plus" data-toggle="modal"
                                            data-target="#myModal">
                                            增加子级分类
                                        </vxe-button> -->
                                        <a role="menuitem" tabindex="-1" @click="show_insRegionCityChildren">增加子级</a>
                                    </li>
                                    <li role="presentation">
                                        <!-- <vxe-button @click="getCurrentEvent" icon="glyphicon glyphicon-edit"
                                            data-toggle="modal" data-target="#myModal2">修改分类
                                        </vxe-button> -->
                                        <a role="menuitem" tabindex="-1" @click="show_updRegionCity">修改分类</a>
                                    </li>

                                </ul>
                            </div>
                            <vxe-button icon="glyphicon glyphicon-remove-circle" @click="deleteTreeNode">删除分类
                            </vxe-button>
                        </template>
                    </vxe-toolbar>
                </div>
                <div>
                    <vxe-toolbar>
                        <template v-slot:buttons>
                            <vxe-button icon="glyphicon glyphicon-search" data-toggle="modal" data-target="#myModel8">查询
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-plus" @click="openInsSupplier">
                                增加
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-edit" @click="openUpdSupplier">修改
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-remove-circle" class="btn-danger"
                                @click="delSupplier">删除</vxe-button>
                            <vxe-button icon="glyphicon glyphicon-export">导出</vxe-button>
                            <vxe-button icon="glyphicon glyphicon-picture" data-toggle="modal" data-target="#myModel9">
                                照片</vxe-button>
                            <vxe-button icon="
                            glyphicon glyphicon-user" @click="openContactsModal">联系人</vxe-button>
                            <vxe-button icon="fa fa-cog" @click="columnModal">字段设置
                            </vxe-button>
                            <!-- <vxe-button @click="$refs.xTable.setCurrentRow(tableData[1])">设置第二行选中</vxe-button> -->
                            <!-- <vxe-button @click="$refs.xTable.clearCurrentRow()">取消选中</vxe-button> -->
                        </template>
                    </vxe-toolbar>
                </div>
            </div>
            <div class="col-sm-12 treefont" style="height: 81%; border: 0px solid red; padding-right: 0px;">
                <div v-show="treeVisble" class="col-sm-2"
                    style=" height: 100%;border: 0px solid red; font-size: 16px; padding-right: 0px;">
                    <!-- <div class="col-sm-12">
                        <div id="treeview12" class=""></div> 
                    </div> -->
                    <!-- 左侧tree -->
                    <template>
                        <!-- :tree-config="{children: 'children',expandAll:'true'}" -->
                        <!-- :tree-config="{children: 'children',reserve:'true'}" -->
                        <vxe-grid round resizable show-overflow class="mytable-scrollbar" height="100%"
                            row-id="regionId" highlight-hover-row ref="xTree" highlight-current-row :show-header="false"
                            @current-change="currentChangeEventTree"
                            :tree-config="{children: 'children',reserve:'true'}" :data="treeData" :columns="treeColumn">
                            <!-- 使用自定义插槽来定义显示内容 -->
                            <template v-slot:user-slot="{ row }">
                                <span>{{ row.regionId+'-'+row.regionName }}</span>
                            </template>
                        </vxe-grid>
                    </template>
                </div>
                <div :class="[treeVisble?'col-sm-10 btn-flex':'col-sm-12 btn-flex']"
                    style="height: 100%;border: 0px solid red; padding: 0px !important; ">
                    <div class="anniu"><button class="btn btn-left" @click="switchTo">
                            <i v-if="treeVisble" class="fa fa-caret-left"></i>
                            <i v-else class="fa fa-caret-right"></i>
                        </button>
                    </div>
                    <div style="height: 100%; width: 99%; padding: 0px;">
                        <div style="height: 57%;">
                            <!-- <button v-slot:buttons type="button" @click="getCurrentEvent"> 你好</button> -->
                            <template>
                                <vxe-grid border stripe highlight-hover-row highlight-current-row resizable ref="xTable"
                                    class="mytable-scrollbar" auto-resize height="100%" :data="tableData"
                                    :columns="tableColumn" @current-change="currentChangeEvent" round
                                    show-header-overflow show-overflow>
                                </vxe-grid>
                            </template>
                        </div>
                        <div style="height: 38%;">
                            <h5 class="context2"><span>&nbsp;&nbsp;&nbsp;&nbsp;联系人</span></h5>
                            <!-- <button v-slot:buttons type="button" @click="getCurrentEvent"> 你好</button> -->
                            <template>
                                <vxe-grid border stripe highlight-hover-row highlight-current-row resizable
                                    ref="xTable2" class="mytable-scrollbar" auto-resize height="100%"
                                    :data="tableDataPhone" :columns="tableColumn2" @current-change="currentChangeEvent"
                                    round show-header-overflow show-overflow>
                                </vxe-grid>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 countn" style=" height: 4.6%; border: 0px solid red;">
                &nbsp;&nbsp;&nbsp;&nbsp;总数据：<span>999</span></div>
            <!-- 模态框  -->
            <!-- 增加分类 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">厂商分类</h4>
                        </div>
                        <div class="modal-body" style="padding: 15px 30px;">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;分类编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="regionCity.regionId">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;分类名称</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="regionCity.regionName">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info abtn"
                                style="padding-left: 25px; padding-right: 25px;" data-dismiss="modal">取消</button>
                            <button type="button" class="btn  btn-success abtn"
                                style="padding-left: 25px; padding-right: 25px;" @click="insRegionCity">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 修改分类 -->
            <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel2">厂商分类</h4>
                        </div>
                        <div class="modal-body" style="padding: 15px 30px;">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;分类编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="regionCity.regionId">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;分类名称</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                            v-model="regionCity.regionName">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info abtn"
                                style="padding-left: 25px; padding-right: 25px;" data-dismiss="modal">取消</button>
                            <button type="button" class="btn  btn-success abtn"
                                style="padding-left: 25px; padding-right: 25px;" @click="updRegionCity">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 删除分类 -->
            <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel3">卡修智慧系统</h4>
                        </div>
                        <div class="modal-body">
                            <h5>确定要删除此分类吗？</h5>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn " data-dismiss="modal">否</button>
                            <button type="button" class="btn btn-primary" @click="deletebtn">是</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade bs-example-modal-sm" id="myModalalert" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">

                        <div class="modal-body">
                            <h5><i class="fa fa-times" style="color: red;"></i> 存在子节点，不能删除！！！</h5>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ====== 供货商资料增加 ====== -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel6" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document" style="width: 1000px;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel5">供货单位编辑
                                <button type="button" class="btn btn-success pull-right" @click="toInsSupplier"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 保存</button>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                                <form class="form-horizontal fordiv1">
                                    <div class="col-sm-12">
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;厂商代码</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control" v-model="supplier.provCode">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;厂商名称</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.provName">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;地址</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.address" style="width: 105.5%;">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">经营情况</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.operation">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">网址</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.httpA">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="inputEmail1" class="col-sm-4 control-label">开户行</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.khyh" style="width: 105.5%;">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;银行账号&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        oninput="value=value.replace(/[^\d]/g,'')"
                                                        v-model="supplier.yhzh">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;付款方式&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" v-model="supplier.pmId">
                                                        <option value="0">=== 请选择 ===</option>
                                                        <option v-for="item in pasymentMethod" :value="item.pmId">{{
                                                            item.pmethod }}</option>

                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;厂商等级&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" style="width: 103%;"
                                                        v-model="supplier.fgId">
                                                        <option value="0">=== 请选择 ===</option>
                                                        <option v-for="item in firmGradeList" :value="item.fgId">{{
                                                            item.fgrade }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">经营品牌</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.zd2">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-8">
                                                <label for="inputEmail1" class="col-sm-4 control-label"
                                                    style="margin-left: 5px !important;">厂商类别</label>
                                                <div class="col-sm-4">
                                                    <input type="text" class="form-control" disabled
                                                        style="border-radius:4px 0px 0px 4px;"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.provType">
                                                </div>
                                                <div class="col-lg-5">
                                                    <div class="input-group" style="width: 121%;">
                                                        <input type="text" class="form-control" disabled
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            style="border-radius:0px 0px 0px 0px;"
                                                            v-model="supplier.regionName">
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" @click="btnselection"
                                                                type="button"><span
                                                                    class="glyphicon glyphicon-plus"></span></button>
                                                        </span>
                                                    </div><!-- /input-group -->
                                                </div><!-- /.col-lg-6 -->
                                            </div>
                                        </div>
                                        <!-- =联系人= -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;联系人&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.contacts.scName">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;电话&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.contacts.scTelephone">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;手机&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" style="width: 103%;"
                                                        oninput="value=value.replace(/[^\d]/g,'')"
                                                        v-model="supplier.contacts.scPhone">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">账期(天)</label>
                                                <div class="col-sm-8">
                                                    <input type="number" class="form-control"
                                                        oninput="value=value.replace(/[^\d]/g,'')"
                                                        v-model="supplier.preDay">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-8">
                                                <label for="inputEmail1" class="col-sm-4 control-label"
                                                    style="margin-left: 2px !important;">备注</label>
                                                <div class="col-sm-10">
                                                    <input type="text" class="form-control" style="width: 101%;"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.remark">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ====== 供货商资料修改 ====== -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel7" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document" style="width: 1000px;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel5">供货单位编辑
                                <button type="button" class="btn btn-success pull-right" @click="toUpdSupplier"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 保存</button>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                                <form class="form-horizontal fordiv1">
                                    <div class="col-sm-12">
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;厂商代码</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control" v-model="supplier.provCode">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;厂商名称</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.provName">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;地址</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.address" style="width: 105.5%;">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">经营情况</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.operation">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-3" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">网址</label>
                                                <div class="col-sm-7">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.httpA">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="inputEmail1" class="col-sm-4 control-label">开户行</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.khyh" style="width: 105.5%;">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;银行账号&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        oninput="value=value.replace(/[^\d]/g,'')"
                                                        v-model="supplier.yhzh">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;付款方式&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" v-model="supplier.pmId">
                                                        <option value="0">=== 请选择 ===</option>
                                                        <option v-for="item in pasymentMethod" :value="item.pmId">{{
                                                            item.pmethod }}</option>

                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;厂商等级&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" style="width: 103%;"
                                                        v-model="supplier.fgId">
                                                        <option value="0">=== 请选择 ===</option>
                                                        <option v-for="item in firmGradeList" :value="item.fgId">{{
                                                            item.fgrade }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">经营品牌</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.zd2">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-8">
                                                <label for="inputEmail1" class="col-sm-4 control-label"
                                                    style="margin-left: 5px !important;">厂商类别</label>
                                                <div class="col-sm-4">
                                                    <input type="text" class="form-control" disabled
                                                        style="border-radius:4px 0px 0px 4px;"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.provType">
                                                </div>
                                                <div class="col-lg-5">
                                                    <div class="input-group" style="width: 121%;">
                                                        <input type="text" class="form-control" disabled
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            style="border-radius:0px 0px 0px 0px;"
                                                            v-model="supplier.regionName">
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" @click="btnselection"
                                                                type="button"><span
                                                                    class="glyphicon glyphicon-plus"></span></button>
                                                        </span>
                                                    </div><!-- /input-group -->
                                                </div><!-- /.col-lg-6 -->
                                            </div>
                                        </div>
                                        <!-- =联系人= -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;联系人&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.contacts.scName">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;电话&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.contacts.scTelephone">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;手机&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" style="width: 103%;"
                                                        oninput="value=value.replace(/[^\d]/g,'')"
                                                        v-model="supplier.contacts.scPhone">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 15px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">账期(天)</label>
                                                <div class="col-sm-8">
                                                    <input type="number" class="form-control"
                                                        oninput="value=value.replace(/[^\d]/g,'')"
                                                        v-model="supplier.preDay">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-8">
                                                <label for="inputEmail1" class="col-sm-4 control-label"
                                                    style="margin-left: 2px !important;">备注</label>
                                                <div class="col-sm-10">
                                                    <input type="text" class="form-control" style="width: 101%;"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="supplier.remark">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 供货商查询 -->
            <div class="modal fade" id="myModel8" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>

                            <h4 class="modal-title clearfix" id="myModalLabel8">供货单位查询
                                <div class="pull-right">
                                    <div class="checkbox checcss">
                                        <label>
                                            <input type="checkbox"> 停用
                                        </label>
                                    </div>
                                    <button type="button" class="btn btn-success"
                                        style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                            class="glyphicon glyphicon-search"></span> 查询</button>
                                </div>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                                <form class="form-horizontal fordiv1">
                                    <div class="col-sm-12">
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-6" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;厂商代码&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;厂商名称&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-6" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;地址&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;付款方式&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control">
                                                        <option>1</option>
                                                        <option>2</option>
                                                        <option>3</option>
                                                        <option>4</option>
                                                        <option>5</option>
                                                    </select>
                                                </div>
                                            </div>-
                                        </div>
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-6" style="margin-right: 18px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">厂商等级</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control">
                                                        <option>1</option>
                                                        <option>2</option>
                                                        <option>3</option>
                                                        <option>4</option>
                                                        <option>5</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 12px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">经营品牌</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-6" style="margin-right: 18px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">厂商类别</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control">
                                                        <option>1</option>
                                                        <option>2</option>
                                                        <option>3</option>
                                                        <option>4</option>
                                                        <option>5</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 12px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">联系人</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-6" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;电话&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;手机&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-6" style="margin-right: 18px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;经营情况&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6" style="margin-right: 12px;">
                                                <label for="inputEmail1"
                                                    class="col-sm-4 control-label">&nbsp;备注&nbsp;</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 删除供货商资料 -->
            <div class="modal fade" id="myModal9" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel9">删除确认</h4>
                        </div>
                        <div class="modal-body">
                            <h4>是否确认删除该记录？</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                            <button type="button" @click="delSupplierRequest" class="btn btn-primary">是</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 商品照片 -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel9" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document" style="width: 600px;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel10">商品照片
                                <button type="button" class="btn btn-success pull-right"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-upload"></span>&nbsp;上传图片</button>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px;">
                                <div class="flexdiv" style="padding-bottom: 10px;position: relative;">
                                    <span class="yuanx1 yuanx1-1">
                                        <span class="yuanx2">1</span>
                                    </span>
                                    <span class="yuanx1 yuanx1-2">
                                        <span class="yuanx2">2</span>
                                    </span>
                                    <div class="pre">
                                    </div>
                                    <div style="border: 0px solid rebeccapurple;">
                                        <div class=" icon-div-img">
                                            <span v-if="textHide[0]"><img :src="imgUrl[0]" alt=""></span>
                                            <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                            <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                        </div>
                                        <div class="btn-icon">
                                            <span style="display: none;"><input type="file" ref="filElem"
                                                    accept="image/*" @change="getFile(0,$event)"></span>
                                            <button @click="choiceImg(0)" class="btn btn-primary"
                                                type="primary">选择图片</button>
                                            <button type="button" class="btn btn-danger">删除</button>
                                        </div>
                                    </div>
                                    <div style="border: 0px solid rebeccapurple; ">
                                        <div class=" icon-div-img">
                                            <span v-if="textHide[1]"><img :src="imgUrl[1]" alt=""></span>
                                            <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                            <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                        </div>
                                        <div class="btn-icon">
                                            <span style="display: none;"><input type="file" ref="filElem1"
                                                    accept="image/*" @change="getFile(1,$event)"></span>
                                            <button @click="choiceImg(1)" class="btn btn-primary"
                                                type="primary">选择图片</button>
                                            <button type="button" class="btn btn-danger">删除</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="flexdiv" style="padding-top: 10px; border-top: 1px solid gray;">
                                    <span class="yuanx1 yuanx1-3">
                                        <span class="yuanx2">3</span>
                                    </span>
                                    <span class="yuanx1 yuanx1-4">
                                        <span class="yuanx2">4</span>
                                    </span>
                                    <div style="border: 0px solid rebeccapurple;">
                                        <div class=" icon-div-img">
                                            <span v-if="textHide[2]"><img :src="imgUrl[2]" alt=""></span>
                                            <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                            <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                        </div>
                                        <div class="btn-icon">
                                            <span style="display: none;"><input type="file" ref="filElem2"
                                                    accept="image/*" @change="getFile(2,$event)"></span>
                                            <button @click="choiceImg(2)" class="btn btn-primary"
                                                type="primary">选择图片</button>
                                            <button type="button" class="btn btn-danger">删除</button>
                                        </div>
                                    </div>
                                    <div style="border: 0px solid rebeccapurple;">
                                        <div class=" icon-div-img">
                                            <!-- <img src="../imags/3AA159DD714F65B532595C955DEB5356.jpg" alt=""> -->
                                            <span v-if="textHide[3]"><img :src="imgUrl[3]" alt=""></span>
                                            <div v-else style="padding-left: 25px;"><span>无图片</span></div>
                                        </div>
                                        <div class="btn-icon">
                                            <span style="display: none;"><input type="file" ref="filElem3"
                                                    accept="image/*" @change="getFile(3,$event)"></span>
                                            <button @click="choiceImg(3)" class="btn btn-primary"
                                                type="primary">选择图片</button>
                                            <button type="button" class="btn btn-danger">删除</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 字段设置 -->
            <div class="modal fade bs-example-modal-lg mytable-scrollbar" tabindex="-1" id="myModel10" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document" style="width: 900px;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel2">字段设置

                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 30px ;">
                                <div style="height:394px;  overflow:auto;">
                                    <table class="table table-bordered table-hover table-striped itemtable">
                                        <tr>
                                            <td style="width: 10%;">
                                                <div class="checkbox" style="margin: 00px;">
                                                    <label>
                                                        <input type="checkbox" @click="checkAll"
                                                            v-model="is_check_all">显示
                                                    </label>
                                                </div>
                                            </td>
                                            <td style="width: 15%;"><span>序号</span></td>
                                            <td style="width: 25%;"><span>字段</span></td>
                                            <td style="width: 25%;"><span>字段名称</span></td>
                                            <td style="width: 25%;"><span>显示宽度</span></td>
                                        </tr>
                                        <tr v-for="item,index in settableColumn">
                                            <td class="context">
                                                <span><input type="checkbox" v-model="check_list"
                                                        :value="item.num"></span>
                                            </td>
                                            <td><span>{{ item.num}}</span></td>
                                            <td><span>{{ item.field }}</span></td>
                                            <td><span>{{ item.title }}</span></td>
                                            <td @dblclick="td_dbclick(item,index)"
                                                style="padding-bottom: 0px; padding-top: 0px;">
                                                <span v-if="item.inputVislble">{{ item.widthtemp }}</span>
                                                <div v-else class="form-group inputdiv">
                                                    <input type="tel" pattern="[0-9]*" :ref="item.tfocus"
                                                        v-model="item.widthtemp" class="form-control"
                                                        @blur="inputblur(item,index)"
                                                        @keyup.enter="inputblur(item,index)"
                                                        oninput="value=value.replace(/[^\d]/g,'')" />
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="col-sm-12" style="text-align: right;padding-top: 10px;padding-right: 30px;">
                                <button type="button" class="btn" style="padding-right: 25px; padding-left: 25px;"
                                    data-dismiss="modal">取消</button>
                                <button type=" button" class="btn btn-info" @click="updshow"
                                    style="padding-right: 25px; padding-left: 25px;">保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 联系人 -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel11" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel2">{{ supplierName }}&nbsp;的联系人
                            </h4>
                        </div>
                        <div class="modal-body row" style="padding-top: 0px; padding-right: 40px !important;">
                            <div class="coml-sm-12 clearfix" style="padding: 0px 20px 0px 30px;">
                                <div class="coml-sm-12 pull-right" style="padding: 10px 0px;">
                                    <vxe-button icon="glyphicon glyphicon-plus" @click=" initContactsPojo">增加
                                    </vxe-button>
                                    <vxe-button icon="glyphicon glyphicon-remove-circle" class="btn-danger"
                                        @click="opDelContacts">删除</vxe-button>
                                    <vxe-button icon="glyphicon glyphicon-remove-circle" @click="saveContacts"
                                        class="btn-danger">保存
                                    </vxe-button>
                                </div>
                                <form class="form-horizontal fordiv1">
                                    <div class="col-sm-12">
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 18px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label"><span
                                                        class="span1">*</span>&nbsp;联系人</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="contactsPojo.scName">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4" style="margin-right: 12px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">手机</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="contactsPojo.scPhone">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label for="inputEmail1" class="col-sm-4 control-label">职位</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" style="width: 103%;"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="contactsPojo.scPost">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- = -->
                                        <div class="form-fiex col-sm-12">
                                            <div class="form-group col-sm-4" style="margin-right: 18px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">电话</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="contactsPojo.scTelephone">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4" style="margin-right: 12px;">
                                                <label for="inputEmail1" class="col-sm-4 control-label">Email</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control"
                                                        onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                        v-model="contactsPojo.email">
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4"></div>
                                        </div>
                                    </div>
                                </form>
                                <div class="col-sm-12" style="height: 200px;padding-right: 0px;">
                                    <template>
                                        <vxe-grid border stripe highlight-hover-row highlight-current-row resizable
                                            ref="xTable3" class="mytable-scrollbar" auto-resize height="100%"
                                            :data="tableContactsData" :columns="tableColumn3"
                                            @current-change="currentChangeEventXTable3" round show-header-overflow
                                            show-overflow>
                                        </vxe-grid>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 分类选择 -->
            <div class="modal fade" id="myModel12" tabindex="-1" role="dialog" data-backdrop="false"
                aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel10">厂商分类选择
                                <button type="button" class="btn btn-success pull-right" @click="optionTreeDataT"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span>&nbsp;选择</button>
                            </h4>
                        </div>
                        <div class="modal-body row " style="padding-top: 0px; ">
                            <div class="coml-sm-12 tempTable" style="padding: 0px 30px 0px 30px;">
                                <div style="height: 400px;padding-right: 0px; ">
                                    <vxe-grid round border="none" resizable show-overflow class="mytable-scrollbar"
                                        height="100%" row-id="regionId" highlight-hover-row ref="xTree2"
                                        highlight-current-row :show-header="false"
                                        @current-change="currentChangeEventTree2"
                                        :tree-config="{children: 'children',expandAll:'true',line: true}"
                                        :data="treeData" :columns="treeColumn">
                                        <template v-slot:user-slot="{ row }">
                                            <span>{{ row.regionId+'-'+row.regionName }}</span>
                                        </template>
                                    </vxe-grid>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="myModal13" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel9">删除确认</h4>
                        </div>
                        <div class="modal-body">
                            <h5>是否确认删除该记录？</h5>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                            <button type="button" @click="delContacts" class="btn btn-primary">是</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="js/jquery-1.12.4.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/bootstrap.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/xe-utils"></script>
    <script src="https://cdn.jsdelivr.net/npm/vxe-table"></script>
    <script src="js/bootstrap-treeview.js"></script>
    <script src="js/common.js"></script>
    <script type="text/javascript">
        //获取字段名和属性名
        // SELECT COLUMN_NAME,column_comment FROM INFORMATION_SCHEMA.Columns WHERE table_name='student' AND table_schema='myschool1913'
        var Main = {
            data() {
                return {
                    imgUrl: [],
                    treeVisble: true,
                    isLoad: true,    //只在加载使用一次
                    textHide: [false, false, false, false],
                    check_list: [],
                    is_check_all: false,
                    pasymentMethod: [],    //付款方式
                    firmGradeList: [],       //厂商等级
                    tempRegionCity: {},  //选择分类
                    //联系人实体
                    contactsPojo: { scId: "", scName: "", scPost: "", scTelephone: "", scPhone: "", email: "", column1: "" },
                    //供货商名称
                    supplierName: "",
                    supplier: {  //供货商实体
                        contacts: { scId: "", scName: "", scTelephone: "", scPhone: "" }, //联系人实体
                        sid: "", regionName: "", provCode: "", provName: "", address: "", operation: "", httpA: "", khyh: "", yhzh: "", pmId: "", fgId: "", zd2: "", provType: "", preDay: "0", remark: ""
                    },
                    regionCity: { regionId: "", regionName: "", parentid: "", children: [] },  //分类对象
                    //修改 加载时查询字段及其注释加 然后再查询数据
                    //先查询加载列表 然后获取列头
                    columns: [],
                    tableColumn: [],    //显示的列
                    settableColumn: [],  //字段设置的数据源
                    setShowtableColumn: [], //提交数据库修改的数据
                    tableColumn3: [
                        { num: 1, field: 'scName', title: '联系人', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'scPost', title: '职位', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'scPhone', title: '手机', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'scTelephone', title: '电话', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'email', title: 'Email', sortable: true, showOverflow: true, visible: true }
                    ],
                    tableContactsData: [], //联系人集合数据
                    tableDataPhone: [],
                    tableData: [],
                    tableColumn2: [ //
                        { num: 1, field: 'scName', title: '联系人', sortable: true, showOverflow: true, width: 200, visible: true },
                        { num: 1, field: 'scPost', title: '职位', sortable: true, showOverflow: true, width: 200, visible: true },
                        { num: 1, field: 'scPhone', title: '手机', sortable: true, showOverflow: true, width: 200, visible: true },
                        { num: 1, field: 'scTelephone', title: '电话', sortable: true, showOverflow: true, width: 200, visible: true },
                        { num: 1, field: 'email', title: 'Email', sortable: true, showOverflow: true, width: 200, visible: true },
                    ],
                    // 
                    treeColumn: [
                        { field: 'regionName', showOverflow: true, treeNode: true, type: { expand: 'true' }, slots: { default: 'user-slot' } },
                    ], //左侧树形   
                    treeData: []   //左侧树形   
                }
            },
            methods: {
                //获取焦点时显示文本框
                td_dbclick(item, index) {
                    item.inputVislble = false;
                    this.$nextTick(function () {
                        this.$refs.itemName[0].focus()
                    });
                },
                //input失去焦点显示span
                inputblur(item, index) {
                    item.inputVislble = true;
                },
                //字段设置 - 点击保存
                updshow() {
                    //设置所有false
                    this.settableColumn.forEach(item => item.visible = false);
                    //遍历checklist 选中的为true
                    this.settableColumn.forEach((item) => {
                        this.check_list.forEach(arr => {
                            if (arr == item.num) { item.visible = true; }
                        })
                        item.width = item.widthtemp;
                    });
                    this.setShowtableColumn = [];
                    this.settableColumn.forEach((item) => {
                        this.setShowtableColumn.push({
                            columnWidth: item.width,
                            columnVisible: item.visible == true ? 1 : 0,
                            columnId: item.params.columnId
                        })
                    });

                    // console.log(this.setShowtableColumn);
                    //调用方法更新配置
                    this.updateTableColumn();

                },
                //获取列头
                gettableColumns() {
                    // 获取所有列配置
                    this.$nextTick(() => {
                        this.columns = this.$refs.xTable.getColumns();
                    })
                },
                //全选
                checkAll() {
                    if (this.settableColumn.length == this.check_list.length) {
                        this.check_list = [];
                    } else {
                        this.check_list = this.settableColumn.map(item => item.num)
                    }
                },
                currentChangeEvent({
                    row, rowIndex
                }) {
                    //获取选中行数据
                    try {
                        this.tableDataPhone = this.$refs.xTable.getCurrentRecord().relation;
                    } catch (err) {
                        this.tableDataPhone = [];
                    }

                },
                currentChangeEventXTable3({ row }) {
                    let json = JSON.parse(JSON.stringify(this.$refs.xTable3.getCurrentRecord()));
                    this.contactsPojo = json;
                    let json2 = JSON.parse(JSON.stringify(this.$refs.xTable.getCurrentRecord()));
                    this.contactsPojo.column1 = json2.sid;
                },
                currentChangeEventTree({
                    row, rowIndex
                }) {
                    this.toFind()
                },
                currentChangeEventTree2({
                    row, rowIndex
                }) {

                }
                //点击触发 file
                ,
                choiceImg(index) {
                    if (index == 0) {
                        this.$refs.filElem.dispatchEvent(new MouseEvent('click'));
                    } else if (index == 1) {
                        this.$refs.filElem1.dispatchEvent(new MouseEvent('click'));
                    } else if (index == 2) {
                        this.$refs.filElem2.dispatchEvent(new MouseEvent('click'));
                    } else if (index == 3) {
                        this.$refs.filElem3.dispatchEvent(new MouseEvent('click'));
                    }
                },
                getFile(index, e) {
                    console.log("成功");
                    let _this = this;
                    var files = e.target.files[0];
                    /*图片类型正则验证*/
                    var imgStr = /\.(jpg|jpeg|png|bmp|BMP|JPG|PNG|JPEG)$/;
                    console.log(typeof e.target.files[0])
                    if (typeof e.target.files[0] == 'undefined') {
                        return false;
                    }
                    if (files.name == "") {
                        alert("请选择图片");
                        return false;
                    }
                    else {
                        if (!imgStr.test(files.name)) {
                            alert("文件不是图片类型");
                            return false;
                        } else {
                            /*图片大小*/
                            var imagSize = files.size;
                            if (!imagSize < (1024 * 1024 * 5)) {
                                if (!e || !window.FileReader) return  // 判断是否支持FileReader
                                let reader = new FileReader()
                                reader.readAsDataURL(files) // 文件转换
                                reader.onloadend = function () {
                                    // _this.imgUrl[index] = this.result;
                                    // _this.textHide[index] = true;
                                    _this.$set(_this.imgUrl, index, this.result);
                                    _this.$set(_this.textHide, index, true);
                                    // console.log(index);
                                    // console.log(_this.imgUrl);
                                    // console.log(_this.textHide);
                                }
                            } else {
                                alert(files.name + "大小不能超过" + 5 + "M");
                                return false;
                            }
                        }
                    }
                },
                //左侧tree切换显示
                switchTo() {
                    this.treeVisble = this.treeVisble == true ? false : true;
                },
                //==============================================
                /*
                    查询左侧tree分类
                */
                find() {
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/suppliersRegionCity",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.treeData = result.data;
                                if (that.treeData.length > 0 && that.isLoad == true) {
                                    //只有页面第一次加载运行时
                                    //设置第一行选中
                                    that.isLoad = false;
                                    that.$refs.xTree.setCurrentRow(that.treeData[0]);
                                    that.toFind();
                                }
                            })
                        }
                    });
                },
                /*
                    新增
                */
                insRegionCity() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/suppliersRegionCity/ins",
                        type: "post",
                        data: that.regionCity,
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.isLoad = true;
                                that.find();
                                that.toFind()
                                $("#myModal").modal("hide");
                            } else if (result.code == 3000) {
                                //id存在 主键冲突
                            } else if (result.code == 1002) {
                                //参数校验失败
                            }
                        }
                    });
                },
                /*
                    发送请求修改分类
                */
                updRegionCity() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/suppliersRegionCity/upd",
                        type: "post",
                        data: that.regionCity,
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.isLoad = true;
                                that.find();
                                that.toFind()
                                $("#myModal2").modal("hide");
                            } else if (result.code == 3000) {
                                //id存在 主键冲突
                            } else if (result.code == 1002) {
                                //参数校验失败
                            }
                        }
                    });
                },
                /*
                    删除分类方法
                */
                deletebtn() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/suppliersRegionCity/del",
                        type: "post",
                        data: { regionId: that.$refs.xTree.getCurrentRecord().regionId },
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.isLoad = true;
                                that.find();
                                that.toFind()
                                $("#myModal3").modal("hide");
                            } else if (result.code == 1005) {
                                //id为空

                            } else if (result.code == 1001) {
                                //有下层子节点
                                $("#myModalalert").modal("show");
                                setTimeout(() => {
                                    $("#myModalalert").modal("hide");
                                }, 2500);
                            }
                        }
                    });
                },
                /*
                    删除模态框
                */
                deleteTreeNode() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" || json.length != 0) {
                        let children = this.$refs.xTree.getCurrentRecord().children
                        if (children.length != 0) {
                            // console.log(children)
                            $("#myModalalert").modal("show");
                            setTimeout(() => {
                                $("#myModalalert").modal("hide");
                            }, 2500);
                        } else {
                            $("#myModal3").modal("show");
                        }
                    }
                },
                /*
                    点击显示父级新增分类模态框
                */
                show_insRegionCity() {
                    let json = JSON.parse(JSON.stringify(this.$refs.xTree.getCurrentRecord()));
                    this.regionCity.regionId = "";
                    this.regionCity.regionName = "";
                    this.regionCity.parentid = json.parentid;
                    $("#myModal").modal("show");
                },
                /*
                    点击增级子级模态框
                */
                show_insRegionCityChildren() {
                    let json = JSON.parse(JSON.stringify(this.$refs.xTree.getCurrentRecord()));
                    this.regionCity.regionId = "";
                    this.regionCity.regionName = "";
                    this.regionCity.children = []
                    //增加子级的时候父级id为当前选各种行的id
                    this.regionCity.parentid = json.regionId;
                    $("#myModal").modal("show");
                    // this.$refs.xTree.setRowExpand(this.$refs.xTree.getCurrentRecord(), true)
                },
                /*
                    修改分类
                */
                show_updRegionCity() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" || json.length != 0) {
                        let bean = JSON.parse(json);
                        this.regionCity.regionId = bean.regionId;
                        this.regionCity.regionName = bean.regionName;
                        this.regionCity.parentid = bean.parentid;
                        this.regionCity.beforeId = bean.regionId;
                        this.regionCity.children = []
                        $("#myModal2").modal("show");
                    }
                },
                //==============================================
                /*
                    查询右侧供货商
                */
                /*
                     查询具体供货商
                */
                toFind() {
                    let regionId = this.$refs.xTree.getCurrentRecord().regionId
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/suppliersRegion/" + regionId,
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.tableData = result.data;
                                that.$refs.xTable.setCurrentRow(that.tableData[0]);
                                try {
                                    that.tableDataPhone = that.tableData[0].relation;
                                } catch (err) {
                                    that.tableDataPhone = [];
                                }
                            })
                        }
                    });
                },
                /*
                    点击供货商查询联系人
                */
                findRelation() {
                    let sid = this.$refs.xTable.getCurrentRecord().sid
                    let that = this;
                    $.ajax({
                        url: "http://localhost:8080/suppliersContacts/" + sid,
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.$refs.xTable.getCurrentRecord().relation = result.data;
                                that.tableDataPhone = that.$refs.xTable.getCurrentRecord().relation;
                                try {
                                    that.tableContactsData = result.data;
                                } catch (error) {
                                    that.tableContactsData = [];
                                }
                            })
                        }
                    });
                },
                /*
                    查询数据库显示字段
                */
                findShowColumn() {
                    this.check_list = [];
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/dzwColumnController/showColumn",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            that.tableColumn = [];
                            handlerResult(result, () => {
                                result.data.forEach((item, index) => {
                                    that.tableColumn.push({
                                        num: index + 1,
                                        field: item.columnName,
                                        title: item.column1,
                                        sortable: true,
                                        showOverflow: true,
                                        width: item.columnWidth,
                                        visible: item.columnVisible == 1 ? true : false,
                                        inputVislble: true,
                                        widthtemp: item.columnWidth,
                                        tfocus: 'itemName',
                                        params: item,
                                    })
                                })
                            })
                            // console.log(JSON.stringify(that.tableColumn));
                        }
                    });
                },
                /*
                    查询显示字段
                */
                find_ShowColumn() {
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/dzwColumnController/showColumn",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.check_list = [];
                                that.settableColumn = [];
                                result.data.forEach((item, index) => {
                                    that.settableColumn.push({
                                        num: index + 1,
                                        field: item.columnName,
                                        title: item.column1,
                                        sortable: true,
                                        showOverflow: true,
                                        width: item.columnWidth,
                                        visible: item.columnVisible == 1 ? true : false,
                                        inputVislble: true,
                                        widthtemp: item.columnWidth,
                                        tfocus: 'itemName',
                                        params: item
                                    })
                                });
                                that.settableColumn.forEach(item => {
                                    if (item.visible == true) {
                                        that.check_list.push(item.num);;
                                    }
                                })
                            })
                        }
                    });
                },
                /*
                    修改列配置
                */
                updateTableColumn() {
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/dzwColumnController/upd",
                        type: "post",
                        data: JSON.stringify(that.setShowtableColumn),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findShowColumn();
                                //查询查询配置列信息
                                // this.findShowColumn();
                                //循环进行修改页面 table 配置信息
                                let obj = JSON.parse(JSON.stringify(that.tableColumn))
                                //循环tbale配置对象 将tableColumn相同的属性值赋值给columns
                                that.columns.forEach((value, key) => {
                                    value.width = obj[key].width;
                                    value.visible = obj[key].visible;
                                })
                                that.$refs.xTable.refreshColumn();
                                $("#myModel10").modal("hide");
                            }
                        }
                    });
                },
                /*
                    字段设置模态框
                */
                columnModal() {
                    this.find_ShowColumn();
                    $("#myModel10").modal("show");
                },
                /*-----------------供货商资料增加----------------*/
                openInsSupplier() {
                    let json = JSON.stringify(this.$refs.xTree.getCurrentRecord());
                    if (json != "null" || json.length != 0) {
                        this.initSupplierAndcontactsPojo();
                        this.selPaymentMethod();
                        this.sekFrimGrade();
                        $("#myModel6").modal("show")
                    }
                },
                /*
                    查询付款方式
                */
                selPaymentMethod() {
                    let that = this;
                    $.ajax({
                        url: "http://localhost:8080/paymentMethod",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.pasymentMethod = result.data;
                            })
                        }
                    })
                },
                /*
                     查询厂商等级
                */
                sekFrimGrade() {
                    let that = this;
                    $.ajax({
                        url: "http://localhost:8080/firmGrade",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.firmGradeList = result.data;
                            })
                        }
                    })
                },
                /*
                    初始化供货商实体与联系人实体
                */
                initSupplierAndcontactsPojo() {
                    //联系人实体
                    this.supplier.contacts.scId = "";
                    this.supplier.contacts.scName = "";
                    this.supplier.contacts.scTelephone = "";
                    this.supplier.contacts.scPhone = "";
                    //供货商实体
                    this.supplier.sid = "";
                    this.supplier.provCode = "";
                    this.supplier.provName = "";
                    this.supplier.address = "";
                    this.supplier.operation = "";
                    this.supplier.httpA = "";
                    this.supplier.khyh = "";
                    this.supplier.yhzh = "";
                    this.supplier.pmId = "1";
                    this.supplier.fgId = "1";
                    this.supplier.zd2 = "";
                    let json = JSON.parse(JSON.stringify(this.$refs.xTree.getCurrentRecord()));
                    this.supplier.provType = json.regionId;
                    this.supplier.regionName = json.regionName;
                    this.supplier.preDay = 0;
                    this.supplier.remark = "";
                },
                /*
                    新增供货商资料
                */
                toInsSupplier() {
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/suppliersRegion/ins",
                        type: "post",
                        data: JSON.stringify(that.supplier),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.toFind();
                                $("#myModel6").modal("hide");
                            } else if (result.code == 3000) {
                                console.log("编号已经存在")
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填")
                            } else {
                                console.log("发生意外错误，刷新重试");
                            }
                        }
                    });
                },
                /*
                    修改供货商资料模态框
                */
                openUpdSupplier() {
                    let json = JSON.stringify(this.$refs.xTable.getCurrentRecord());
                    try {
                        if (json != "null" || json.length != 0) {
                            this.initSupplierAndcontactsPojo();
                            this.selPaymentMethod();
                            this.sekFrimGrade();
                            let pojo = JSON.parse(json);
                            try {
                                this.supplier.contacts.scId = pojo.relation[0].scId;
                                this.supplier.contacts.scName = pojo.relation[0].scName;
                                this.supplier.contacts.scTelephone = pojo.relation[0].scTelephone;
                                this.supplier.contacts.scPhone = pojo.relation[0].scPhone;
                            } catch (error) {
                                this.supplier.contacts.scId = "";
                                this.supplier.contacts.scName = "";
                                this.supplier.contacts.scTelephone = "";
                                this.supplier.contacts.scPhone = "";
                            }
                            //供货商实体
                            this.supplier.sid = pojo.sid;
                            this.supplier.provCode = pojo.provCode;
                            this.supplier.provName = pojo.provName;
                            this.supplier.address = pojo.address;
                            this.supplier.operation = pojo.operation
                            this.supplier.httpA = pojo.httpA
                            this.supplier.khyh = pojo.khyh
                            this.supplier.yhzh = pojo.yhzh
                            this.supplier.pmId = pojo.pmId
                            this.supplier.fgId = pojo.fgId;
                            this.supplier.zd2 = pojo.zd2;
                            this.supplier.provType = pojo.provType;
                            this.supplier.regionName = pojo.regionCity.provName;
                            this.supplier.preDay = pojo.preDay;
                            this.supplier.remark = pojo.remark;
                            $("#myModel7").modal("show");
                        }
                    } catch (error) {

                    }
                },
                /*
                    修改供货商资料
                */
                toUpdSupplier() {
                    var that = this;
                    $.ajax({
                        url: "http://localhost:8080/suppliersRegion/upd",
                        type: "post",
                        data: JSON.stringify(that.supplier),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.toFind();
                                $("#myModel7").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填")
                            } else {
                                console.log("发生意外错误，刷新重试");
                            }
                        }
                    });
                },
                /*
                    新增修改时 选择分类
                */
                btnselection() {
                    try {
                        this.$refs.xTree2.setCurrentRow(this.treeData[0]);
                    } catch (error) {

                    }
                    $("#myModel12").modal("show");
                },
                optionTreeDataT() {
                    let json = JSON.parse(JSON.stringify(this.$refs.xTree2.getCurrentRecord()));
                    this.supplier.provType = json.regionId;
                    this.supplier.regionName = json.regionName;
                    $("#myModel12").modal("hide");
                },
                /*
                    唤醒删除模态框
                */
                delSupplier() {
                    let json = JSON.stringify(this.$refs.xTable.getCurrentRecord());
                    if (json != "null" && json != undefined) {
                        $("#myModal9").modal("show");
                    }
                },
                /*
                    发送请求删除
                */
                delSupplierRequest() {
                    let that = this;
                    let json = this.$refs.xTable.getCurrentRecord();
                    $.ajax({
                        url: "http://localhost:8080/suppliersRegion/del/" + json.sid,
                        type: "post",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.toFind();
                            } else if (result.code == 1005) {
                                console.log("请选择要删除的数据")
                            } else {
                                console.log("发生意外错误，刷新重试");
                            }
                            $("#myModal9").modal("hide");
                        }
                    });
                },
                /*
                    唤起联系人模态框
                */
                openContactsModal() {
                    //初始化联系人对象实体
                    this.initContactsPojo();
                    this.tableContactsData = [];
                    let json = JSON.stringify(this.$refs.xTable.getCurrentRecord());
                    if (json != "null" && json != undefined) {
                        try {
                            let pojo = JSON.parse(json);
                            this.supplierName = pojo.provName;
                            this.tableContactsData = pojo.relation;

                        } catch (error) {
                            this.tableContactsData = [];
                        }
                        $("#myModel11").modal("show");
                    }
                },
                /*
                    联系人实体初始化
                */
                initContactsPojo() {
                    this.contactsPojo.scId = "";
                    this.contactsPojo.scName = "";
                    this.contactsPojo.scPost = "";
                    this.contactsPojo.scTelephone = "";
                    this.contactsPojo.scPhone = "";
                    this.contactsPojo.email = "";
                    this.contactsPojo.column1 = "";
                    let json2 = JSON.parse(JSON.stringify(this.$refs.xTable.getCurrentRecord()));
                    this.contactsPojo.column1 = json2.sid;
                },
                /*
                    发送请求提交联系人
                */
                saveContacts() {
                    let that = this;
                    let json = this.$refs.xTable.getCurrentRecord();
                    $.ajax({
                        url: "http://localhost:8080/suppliersContacts/save",
                        type: "post",
                        data: JSON.stringify(that.contactsPojo),
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //初始化联系人实体
                                that.initContactsPojo();
                                that.findRelation();
                            } else if (result.code == 1002) {
                                console.log("参数校验失败")
                            } else {
                                console.log("发生意外错误，刷新重试");
                            }
                        }
                    });
                },
                /*
                    唤醒删除联系人模态框
                */
                opDelContacts() {
                    let json = JSON.stringify(this.$refs.xTable3.getCurrentRecord());
                    if (json != "null" && json != undefined) {
                        $("#myModal13").modal("show")
                    }
                },
                delContacts() {
                    let that = this;
                    $.ajax({
                        url: "http://localhost:8080/suppliersContacts/del/" + that.$refs.xTable3.getCurrentRecord().scId,
                        type: "post",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                that.initContactsPojo();
                                that.findRelation();
                            } else if (result.code == 1005) {
                                console.log("参数校验失败,ID不能为空")
                            } else {
                                console.log("发生意外错误，刷新重试");
                            }
                            $("#myModal13").modal("hide");
                        }
                    });
                }
            },
            created() {
                this.find();
                //查询显示列
                this.findShowColumn()
                //获取列表可视的列
                this.gettableColumns();
            }
            ,
            watch: {
                check_list() {
                    if (this.settableColumn.length == this.check_list.length) {
                        this.is_check_all = true;
                    } else {
                        this.is_check_all = false;
                    }
                }
            }
        }
        var Ctor = Vue.extend(Main);
        new Ctor().$mount('.container-fluid');
        // bootstarp下拉框
        $('.dropdown-toggle').dropdown()
        //控制模态框层级
        $(document).ready(function () {
            // 通过该方法来为每次弹出的模态框设置最新的zIndex值，从而使最新的modal显示在最前面
            $(document).on('show.bs.modal', '.modal', function () {
                var zIndex = 1040 + (10 * $('.modal:visible').length);
                $(this).css('z-index', zIndex);
                setTimeout(function () {
                    $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
                }, 0);
            });
        });
    </script>
</body>

</html>