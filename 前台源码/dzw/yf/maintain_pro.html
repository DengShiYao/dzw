<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>维修项目</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/maintain_pro.css">
    <link rel="stylesheet" href="css/public-y.css">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="package/lib/style.css">
</head>

<body class="hea-div">
    <div class="container-fluid" style="height: 100%;">
        <div class="row" style="height: 100%;padding: 0px 0px !important;">
            <div style=" border: 0px solid red; padding: 0px 0px !important;" class="col-sm-12">
                <div class="col-sm-12 clearfix nav-div" style="border: 0px solid rebeccapurple;">
                    <h3 class="clearfix" style="margin-top: 10px;">维修项目
                        <button class="btn btn-default pull-right btnexit" type="button">关闭</button>
                        <div class="pull-right" style="margin-right: 10px !important;">
                            <form class="form-inline">
                                <div class="form-group">
                                    <input type="text" class="form-control" style="width: 300px;"
                                        placeholder="匹配编码/名称/名称简写">
                                </div>
                                <button type="button" class="btn btn-warning selbtn">搜索</button>
                            </form>
                        </div>
                    </h3>
                </div>
            </div>
            <div class="col-sm-12 flexdiv" style="border: 0px solid red;">
                <div>
                    <vxe-toolbar>
                        <template v-slot:buttons>
                            <vxe-button icon="glyphicon glyphicon-plus" @click="insClassifyModal">增加分类
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-edit" @click="updClassifyModal">修改分类
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-remove-circle" data-toggle="modal" data-toggle="modal"
                                data-target="#myModal3">删除</vxe-button>
                        </template>
                    </vxe-toolbar>
                </div>
                <div>
                    <vxe-toolbar>
                        <template v-slot:buttons>
                            <vxe-button icon="glyphicon glyphicon-plus" @click="openInsServe">增加
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-edit" @click="openUpdServe">修改
                            </vxe-button>
                            <vxe-button icon="glyphicon glyphicon-remove-circle" data-toggle="modal"
                                data-target="#myModal7">删除</vxe-button>
                            <vxe-button icon="fa fa-gavel" data-toggle="modal" data-target="#myModal8">
                                调价</vxe-button>
                            <!-- <vxe-button icon="glyphicon glyphicon-floppy-disk">保存</vxe-button> -->
                            <vxe-button icon="glyphicon glyphicon-export">导出</vxe-button>
                        </template>
                    </vxe-toolbar>
                </div>
            </div>
            <div class="col-sm-12 treefont" style="height: 81%; border: 0px solid red; padding-right: 0px;">
                <div class="col-sm-2 xtable scrollContent"
                    style=" height: 100%; overflow-y: auto; border: 0px solid red; font-size: 16px; padding-right: 0px; background-color: #ffffff;">
                    <!-- 左侧树形  row-id="column1" -->
                    <!-- empty-text="没有更多数据了！" -->
                    <template>
                        <vxe-grid round resizable show-overflow class="mytable-scrollbar" row-id="isId" height="100%"
                            highlight-hover-row ref="xTree1" highlight-current-row :show-header="false"
                            @current-change="currentChangeEventTree"
                            :tree-config="{children: 'children',reserve:'true'}" :data="treeData"
                            :columns="treeColumn1">
                            <!-- 使用自定义插槽来定义显示内容 -->
                            <template v-slot:user-slot="{ row }">
                                <span>{{ row.uid=='' ? row.name : row.uid+'-'+row.name }}</span>
                            </template>
                        </vxe-grid>
                    </template>
                </div>
                <div class="col-sm-10" style="height: 100%;border: 0px solid red; padding-right: 0px;">
                    <div style="height: 100%;">
                        <template>
                            <vxe-grid border stripe highlight-hover-row highlight-current-row resizable ref="xTable"
                                class="mytable-scrollbar" auto-resize height="100%" :data="tableData"
                                :columns="tableColumn" @current-change="currentChangeEvent" round show-header-overflow
                                show-overflow>
                            </vxe-grid>
                        </template>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 countn" style=" height: 4.6%; border: 0px solid red;">
                &nbsp;&nbsp;&nbsp;&nbsp;总数据：<span>999</span></div>

            <!-- 模态框  -->
            <!-- 增加分类 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">{{ classify.name2 }}分类</h4>
                        </div>
                        <div class="modal-body" style="padding: 15px 30px;">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" v-model="classify.id"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')" id="inputEmail3">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别名称</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" v-model="classify.name"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')" id="inputPassword3">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info abtn"
                                style="padding-left: 25px; padding-right: 25px;" data-dismiss="modal">取消</button>
                            <button type="button" class="btn  btn-success abtn"
                                style="padding-left: 25px; padding-right: 25px;" @click="checkRequest">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 修改分类 -->
            <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">{{ classify.name2 }}分类</h4>
                        </div>
                        <div class="modal-body" style="padding: 15px 30px;">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别编码</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" v-model="classify.id"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')" id="inputEmail3">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-3 control-label"><span
                                            class="span1">*</span>&nbsp;类别名称</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" v-model="classify.name"
                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')" id="inputPassword3">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info abtn"
                                style="padding-left: 25px; padding-right: 25px;" data-dismiss="modal">取消</button>
                            <button type="button" class="btn  btn-success abtn"
                                style="padding-left: 25px; padding-right: 25px;" @click="updSaveCheck">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 删除分类 -->
            <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">品牌定义</h4>
                        </div>
                        <div class="modal-body">
                            <h4>删除项目分类时，连同下面的维修项目一起删除？</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                            <button type="button" class="btn btn-primary">是</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 提示语 -->
            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal4">卡修智慧系统</button> -->
            <div class="modal fade bs-example-modal-sm" tabindex="-1" id="myModal4" role="dialog"
                aria-labelledby="mySmallModalLabel">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h4>自能修改子级</h4>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ====== 维修项目增加 ====== -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel5" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel2">服务项目定义<button type="button"
                                    class="btn btn-success pull-right" @click="saveInsServe"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 保存</button>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                                <form class="form-horizontal fordiv1">
                                    <table class="col-sm-12">
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputEmail1" class="col-sm-5 control-label"><span
                                                            class="span1">*</span>&nbsp;项目编码</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="inputEmail1"
                                                            style="width: 102.1%"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.seId">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group" style="margin-left: 10px;">
                                                    <label for="inputEmail0" class="col-sm-5 control-label"><span
                                                            class="span1">*</span>&nbsp;项目名称</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="inputEmail0"
                                                            style="width: 102.1%"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.seName">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="tdpr">
                                                <div class="form-group">
                                                    <label for="inputPassword2" class="col-sm-4 control-label"><span
                                                            class="span1">*</span>&nbsp;收入种类</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control" style="width: 102.1%"
                                                            v-model="serve.iid">
                                                            <option value="1">工时费</option>
                                                            <option value="2">燃油费</option>
                                                            <option value="3">代办费</option>
                                                            <option value="4">其他费</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group" style="margin-left: 10px;">
                                                    <label for="inputPassword3" class="col-sm-4 control-label"><span
                                                            class="span1">*</span>&nbsp;项目类别</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control" style="width: 102.1%"
                                                            v-model="serve.brandId">
                                                            <option value="0">请选择分类</option>
                                                            <option v-for="item in tempDate" :value="item.uid">
                                                                {{ item.uid+'-'+item.name }}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <div class="form-group">
                                                    <label for="inputPassword5"
                                                        class="col-sm-2 control-label">备注</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" id="inputPassword5"
                                                            style="width: 105.7%"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.remark">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="col-sm-12" style="padding: 0px 50px !important;">
                                        <tr>
                                            <td class="tdpr">
                                                <div class="form-group">
                                                    <label for="inputPassword6"
                                                        class="col-sm-4 control-label">标准价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword6"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.price">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">会员价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.memberPrice">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">VIP价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.vipPrice">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="tdpr">
                                                <div class="form-group">
                                                    <label for="inputPassword6"
                                                        class="col-sm-4 control-label">协议价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword6"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.protocolPrice">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">索赔价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.claimPrice">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">保险价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.insurancePrice">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ====== 维修项目修改 ====== -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" id="myModel6" role="dialog"
                aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title clearfix" id="myModalLabel2">服务项目定义<button type="button"
                                    class="btn btn-success pull-right" @click="saveUpdServe"
                                    style="padding-left: 25px; padding-right: 25px; margin-right: 30px;"><span
                                        class="glyphicon glyphicon-ok"></span> 保存</button>
                            </h4>
                        </div>
                        <div class="modal-body row">
                            <div class="coml-sm-12" style="padding: 0px 20px 0px 30px;">
                                <form class="form-horizontal fordiv1">
                                    <table class="col-sm-12">
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputEmail1" class="col-sm-5 control-label"><span
                                                            class="span1">*</span>&nbsp;项目编码</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="inputEmail1"
                                                            style="width: 102.1%"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.seId">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group" style="margin-left: 10px;">
                                                    <label for="inputEmail0" class="col-sm-5 control-label"><span
                                                            class="span1">*</span>&nbsp;项目名称</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="inputEmail0"
                                                            style="width: 102.1%"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.seName">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="tdpr">
                                                <div class="form-group">
                                                    <label for="inputPassword2" class="col-sm-4 control-label"><span
                                                            class="span1">*</span>&nbsp;收入种类</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control" style="width: 102.1%"
                                                            v-model="serve.iid">
                                                            <option value="1">工时费</option>
                                                            <option value="2">燃油费</option>
                                                            <option value="3">代办费</option>
                                                            <option value="4">其他费</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group" style="margin-left: 10px;">
                                                    <label for="inputPassword3" class="col-sm-4 control-label"><span
                                                            class="span1">*</span>&nbsp;项目类别</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control" style="width: 102.1%"
                                                            v-model="serve.brandId">
                                                            <option value="0">请选择分类</option>
                                                            <option v-for="item in tempDate" :value="item.uid">
                                                                {{ item.uid+'-'+item.name }}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <div class="form-group">
                                                    <label for="inputPassword5"
                                                        class="col-sm-2 control-label">备注</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" id="inputPassword5"
                                                            style="width: 105.7%"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.remark">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="col-sm-12" style="padding: 0px 50px !important;">
                                        <tr>
                                            <td class="tdpr">
                                                <div class="form-group">
                                                    <label for="inputPassword6"
                                                        class="col-sm-4 control-label">标准价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword6"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.price">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">会员价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.memberPrice">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">VIP价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.vipPrice">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="tdpr">
                                                <div class="form-group">
                                                    <label for="inputPassword6"
                                                        class="col-sm-4 control-label">协议价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword6"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.protocolPrice">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">索赔价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.claimPrice">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <label for="inputPassword7"
                                                        class="col-sm-4 control-label">保险价</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control" id="inputPassword7"
                                                            onkeyup="this.value=this.value.replace(/[, ]/g,'')"
                                                            v-model="serve.insurancePrice">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 维修项目删除 -->
            <div class="modal fade" id="myModal7" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">删除确认</h4>
                        </div>
                        <div class="modal-body">
                            <h4>是否确认删除该记录？</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                            <button type="button" class="btn btn-primary">是</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 维修项目调价 -->
            <div class="modal fade" id="myModal8" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">调价</h4>
                        </div>
                        <div class="modal-body">
                            <form class="form-horizontal ">
                                <div class="col-sm-2"></div>
                                <div class="form-group" style="margin-top: 15px;">
                                    <div class=" col-sm-3">
                                        <select class="form-control" style="width: 102.1%">
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </div>
                                    <label for="inputPassword3" class="col-sm-2 control-label">=&nbsp;标准价&nbsp;*</label>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control" id="inputPassword3">
                                    </div>
                                </div>
                                <div class="col-sm-2"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">否</button>
                            <button type="button" class="btn btn-primary">是</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 目录编辑提示 -->
            <div class="modal fade bs-example-modal-sm" id="myModalalertupd" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h5><i class="fa fa-times" style="color: red;"></i>&nbsp;{{ hintText }}！！！</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery-1.12.4.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/bootstrap.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/xe-utils"></script>
    <script src="https://cdn.jsdelivr.net/npm/vxe-table"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/xe-utils"></script>
    <script src="https://cdn.jsdelivr.net/npm/vxe-table@3.1.4"></script>
    <script src="js/bootstrap-treeview.js"></script>
    <script src="js/common.js"></script>
    <script type="text/javascript">
        var Main = {
            data() {
                return {
                    //分类
                    classify: { id: "", name: "", name2: "", beforeId: "" },
                    minor: { minorId: "", minorName: "", beforeId: "" },
                    coinSpray: { coinId: "", coinName: "", beforeId: "" },
                    upkeep: { upkeepId: "", upkeepName: "", beforeId: "" },
                    tempDate: [],
                    serve: { seId: "", seName: "", brandId: "", remark: "", price: "", memberPrice: "", vipPrice: "", protocolPrice: "", claimPrice: "", insurancePrice: "", column1: "", column2: "", beforeId: "", iid: "" },
                    hintText: "",
                    tableColumn: [
                        { num: 1, field: 'column1', title: '项目类别', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'seId', title: '项目编码', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'seName', title: '项目名称', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'iid', title: '收入种类', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'price', title: '标准价', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'memberPrice', title: '会员价', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'vipPrice', title: 'VIP价', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'protocolPrice', title: '协议价', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'claimPrice', title: '索赔价', sortable: true, showOverflow: true, visible: true },
                        { num: 1, field: 'insurancePrice', title: '保险价', sortable: true, showOverflow: true, visible: true }
                    ],
                    //维修项目data
                    tableData: [],
                    treeColumn1: [
                        { field: "name", showOverflow: true, treeNode: true, type: { expand: 'true' }, slots: { default: 'user-slot' } }
                    ],
                    treeData: []
                }
            },
            methods: {
                //左侧表格点击更换背景色
                clibanck(index) {
                    this.num = index;
                },
                currentChangeEvent({
                    row
                }) {
                    console.log('行选中事件')
                },
                currentChangeEventTree({ row }) {
                    this.selSarveList();
                }
                //点击出发 file
                , choiceImg() {
                    this.$refs.filElem.dispatchEvent(new MouseEvent('click'))
                },
                findepairing() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/serve/findepairing",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.treeData = [];
                                that.treeData.push(
                                    { uid: "", name: "车型", name2: "车型", children: [], prams: {}, isId: 1, comlun2: "" },
                                    { uid: "", name: "发动机", name2: "发动机", children: [], prams: {}, isId: 2, comlun2: "" },
                                    { uid: "", name: "钣喷", name2: "钣喷", children: [], prams: {}, isId: 3, comlun2: "" },
                                    { uid: "", name: "保养", name2: "保养", children: [], prams: {}, isId: 4, comlun2: "" },
                                    { uid: "", name: "小修", name2: "小修", children: [], prams: {}, isId: 5, comlun2: "" });
                                result.data.typeList.forEach(item => {
                                    that.treeData[0].children.push(
                                        { uid: item.carId, name: item.carName, name2: "车型", children: [], prams: item, isId: '', comlun2: "1" })
                                });
                                result.data.brandList.forEach(item => {
                                    that.treeData[1].children.push(
                                        { uid: item.engineId, name: item.engineName, name2: "发动机", children: [], prams: item, isId: '', comlun2: "2" })
                                });
                                result.data.sprayList.forEach(item => {
                                    that.treeData[2].children.push({
                                        uid: item.coinId, name: item.coinName, name2: "钣喷", children: [], prams: item, isId: '', comlun2: "3"
                                    })
                                });
                                result.data.upkeepList.forEach(item => {
                                    that.treeData[3].children.push(
                                        { uid: item.upkeepId, name: item.upkeepName, name2: "保养", children: [], prams: item, isId: '', comlun2: "4" })
                                });
                                result.data.minorList.forEach(item => {
                                    that.treeData[4].children.push(
                                        { uid: item.minorId, name: item.minorName, name2: "小修", children: [], prams: item, isId: '', comlun2: "5" })
                                });
                                that.selSarveAll();
                            })
                        }
                    });
                },
                /*
                    增加分类模态框
                */
                insClassifyModal() {
                    let json = this.$refs.xTree1.getCurrentRecord();
                    if (json != null) {
                        if (json.isId == 1 || json.isId == 2) {
                            this.hintText = "只能定义车型、发动机以外的分类";
                            $("#myModalalertupd").modal("show");
                            setTimeout(() => {
                                $("#myModalalertupd").modal("hide");
                            }, 2000);
                        } else {
                            if (json.isId != 3 && json.isId != 4 && json.isId != 5) {
                                this.hintText = "增加时只能请选择上级分类";
                                $("#myModalalertupd").modal("show");
                                setTimeout(() => {
                                    $("#myModalalertupd").modal("hide");
                                }, 2000);
                            } else {
                                this.initClassifyPojo();
                                let pojo = JSON.parse(JSON.stringify(json));
                                this.classify.name2 = pojo.name;
                                $("#myModal").modal("show");
                            }
                        }
                    }
                },
                /*
                    初始化分类
                */
                initClassifyPojo() {
                    this.classify.id = "";
                    this.classify.name = "";
                    this.classify.name2 = ""
                    this.classify.beforeId = "";
                    this.minor.minorId = "";
                    this.minor.minorName = "";
                    this.minor.beforeId = "";
                    this.coinSpray.coinId = "";
                    this.coinSpray.coinName = "";
                    this.coinSpray.beforeId = "";
                    this.upkeep.upkeepId = "";
                    this.upkeep.upkeepName = "";
                    this.upkeep.beforeId = "";
                },
                checkRequest() {
                    let index = this.$refs.xTree1.getCurrentRecord().isId;
                    if (index === 3) {
                        this.saveInsCoinSpray();
                    } else if (index === 4) {
                        this.saveInsUpkeep();
                    } else if (index === 5) {
                        this.saveInsMinor()
                    }
                },
                /*
                    调用系方法新增小修列表
                */
                saveInsMinor() {
                    this.minor.minorId = this.classify.id;
                    this.minor.minorName = this.classify.name;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/minor/ins",
                        type: "post",
                        data: JSON.stringify(that.minor),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModal").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                   调用系方法新增保养列表
               */
                saveInsUpkeep() {
                    this.upkeep.upkeepId = this.classify.id;
                    this.upkeep.upkeepName = this.classify.name;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/upkeep/ins",
                        type: "post",
                        data: JSON.stringify(that.upkeep),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModal").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                   调用系方法新增钣喷列表
               */
                saveInsCoinSpray() {
                    this.coinSpray.coinId = this.classify.id;
                    this.coinSpray.coinName = this.classify.name;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/coinSpray/ins",
                        type: "post",
                        data: JSON.stringify(that.coinSpray),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModal").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                    修改分类
                */
                updClassifyModal() {
                    let json = this.$refs.xTree1.getCurrentRecord();
                    if (json != null) {
                        if (json.isId == 1 || json.isId == 2) {
                            this.hintText = "只能修改车型、发动机以外的分类";
                            $("#myModalalertupd").modal("show");
                            setTimeout(() => {
                                $("#myModalalertupd").modal("hide");
                            }, 2000);
                        } else {
                            if (json.isId != 3 && json.isId != 4 && json.isId != 5) {
                                if (json.name2 == "车型" || json.name2 == "发动机") {
                                    this.hintText = "只能修改车型、发动机以外的分类";
                                    $("#myModalalertupd").modal("show");
                                    setTimeout(() => {
                                        $("#myModalalertupd").modal("hide");
                                    }, 2000);
                                } else {
                                    this.initClassifyPojo();
                                    let pojo = JSON.parse(JSON.stringify(json));
                                    this.classify.id = pojo.uid;
                                    this.classify.name = pojo.name;
                                    this.classify.beforeId = pojo.uid;
                                    this.classify.name2 = pojo.name;
                                    $("#myModal2").modal("show");
                                }
                            } else {
                                this.hintText = "只能修改子分类";
                                $("#myModalalertupd").modal("show");
                                setTimeout(() => {
                                    $("#myModalalertupd").modal("hide");
                                }, 2000);
                            }
                        }
                    }
                },
                updSaveCheck() {
                    let json = this.$refs.xTree1.getCurrentRecord();
                    let pojo = JSON.parse(JSON.stringify(json));
                    if (pojo.name2 === "钣喷") {
                        this.saveUpdCoinSpray();
                    } else if (pojo.name2 === "保养") {
                        this.saveUpdUpkeep();
                    } else if (pojo.name2 === "小修") {
                        this.saveUpdMinor();
                    }
                },
                /*
                    调用系方法修改小修列表
                */
                saveUpdMinor() {
                    this.minor.minorId = this.classify.id;
                    this.minor.beforeId = this.classify.beforeId;
                    this.minor.minorName = this.classify.name;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/minor/upd",
                        type: "post",
                        data: JSON.stringify(that.minor),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModal2").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                   调用系方法修改保养列表
               */
                saveUpdUpkeep() {
                    this.upkeep.upkeepId = this.classify.id;
                    this.upkeep.beforeId = this.classify.beforeId;
                    this.upkeep.upkeepName = this.classify.name;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/upkeep/upd",
                        type: "post",
                        data: JSON.stringify(that.upkeep),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModal2").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                   调用系方法修改钣喷列表
               */
                saveUpdCoinSpray() {
                    this.coinSpray.coinId = this.classify.id;
                    this.coinSpray.beforeId = this.classify.beforeId;
                    this.coinSpray.coinName = this.classify.name;
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/coinSpray/upd",
                        type: "post",
                        data: JSON.stringify(that.coinSpray),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModal2").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                    查询维修服务详细
                */
                selSarveList() {
                    let json = this.$refs.xTree1.getCurrentRecord();
                    if (json.uid === "") {
                        return;
                    }
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/serve/selsarve/" + json.uid,
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.tableData = result.data;
                            })
                        }
                    })
                },
                /*
                    查询所有
                */
                selSarveAll() {
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/serve/selsarve",
                        type: "get",
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            handlerResult(result, () => {
                                that.tableData = result.data;
                            })
                        }
                    })
                },
                /*
                    初始化维修服务实体
                */
                initServe() {
                    this.serve.seId = "";
                    this.serve.seName = "";
                    this.serve.brandId = "0";
                    this.serve.remark = "";
                    this.serve.memberPrice = "";
                    this.serve.protocolPrice = "";
                    this.serve.claimPrice = "";
                    this.serve.vipPrice = "";
                    this.serve.insurancePrice = "";
                    this.serve.beforeId = "";
                    this.serve.column1 = "";
                    this.serve.column2 = "";
                    this.serve.iid = 1;
                },
                /*
                    增加维修服务模态框 1车型 2 发动机 3 钣喷 4 保养 5 小修
                */
                openInsServe() {
                    this.initServe();
                    let json = this.$refs.xTree1.getCurrentRecord();
                    if (json == null) {
                        this.tempDate = this.treeData[0].children;
                        this.serve.column2 = "1";
                    } else if (json.name2 === "车型") {
                        this.tempDate = this.treeData[0].children;
                        this.serve.column2 = "1";
                    } else if (json.name2 === "发动机") {
                        this.tempDate = this.treeData[1].children;
                        this.serve.column2 = "2";
                    } else if (json.name2 === "钣喷") {
                        this.tempDate = this.treeData[2].children;
                        this.serve.column2 = "3";
                    } else if (json.name2 === "保养") {
                        this.tempDate = this.treeData[3].children;
                        this.serve.column2 = "4";
                    } else if (json.name2 === "小修") {
                        this.tempDate = this.treeData[4].children;
                        this.serve.column2 = "5";
                    }
                    $("#myModel5").modal("show");
                },
                /*
                    新增维修服务
                */
                saveInsServe() {
                    //获取column1参数
                    this.tempDate.forEach(item => {
                        if (item.uid == this.serve.brandId) {
                            this.serve.column1 = item.name;
                        }
                    })
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/serve/ins",
                        type: "post",
                        data: JSON.stringify(that.serve),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModel5").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },
                /*
                   增加维修服务模态框 1车型 2 发动机 3 钣喷 4 保养 5 小修
               */
                openUpdServe() {
                    this.initServe();
                    let json = this.$refs.xTable.getCurrentRecord();
                    if (json != null) {
                        this.serve = JSON.parse(JSON.stringify(json));
                        this.serve.beforeId = json.seId;
                        if (json.column2 == "1") {
                            this.tempDate = this.treeData[0].children;
                        } else if (json.column2 == "2") {
                            this.tempDate = this.treeData[1].children;
                        } else if (json.column2 == "3") {
                            this.tempDate = this.treeData[2].children;
                        } else if (json.column2 == "4") {
                            this.tempDate = this.treeData[3].children;
                        } else if (json.column2 == "5") {
                            this.tempDate = this.treeData[4].children;
                        }
                        $("#myModel6").modal("show");
                    }
                },
                /*
                    修改维修服务
                */
                saveUpdServe() {
                    //获取column1参数
                    this.tempDate.forEach(item => {
                        if (item.uid == this.serve.brandId) {
                            this.serve.column1 = item.name;
                        }
                    })
                    let that = this;
                    $.ajax({
                        url: "http://127.0.0.1:8080/serve/upd",
                        type: "post",
                        data: JSON.stringify(that.serve),
                        xhrFields: {
                            withCredentials: true
                        },
                        contentType: "application/json;charset=utf-8",
                        crossDomain: true,
                        dataType: "json",
                        success: function (result) {
                            if (result.code == 1000) {
                                //成功
                                that.findepairing();
                                $("#myModel6").modal("hide");
                            } else if (result.code == 1002) {
                                console.log("参数校验失败，红色框必填");
                            } else if (result.code == 3000) {
                                console.log("编号冲突");
                            }
                        }
                    });
                },

            },
            created() {
                this.findepairing();
            }
        };
        var Ctor = Vue.extend(Main);
        new Ctor().$mount('.container-fluid');
    </script>
</body>

</html>